{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///post-robot.min.js","webpack:///webpack/bootstrap 2448d0850db0684651a7","webpack:///./src/index.js","webpack:///./src/interface/index.js","webpack:///./src/interface/client.js","webpack:///./src/conf/index.js","webpack:///./src/conf/config.js","webpack:///./src/conf/constants.js","webpack:///./src/drivers/index.js","webpack:///./src/drivers/receive/index.js","webpack:///./src/lib/index.js","webpack:///./src/lib/promise.js","webpack:///./~/sync-browser-mocks/src/promise.js","webpack:///./src/lib/tick.js","webpack:///./src/lib/util.js","webpack:///./src/lib/log.js","webpack:///./src/lib/windows.js","webpack:///./src/global.js","webpack:///./src/lib/cleanup.js","webpack:///./src/lib/methods.js","webpack:///./src/lib/ready.js","webpack:///./src/compat/index.js","webpack:///./src/compat/ie.js","webpack:///./src/drivers/receive/types.js","webpack:///./src/drivers/send/index.js","webpack:///./src/drivers/send/strategies.js","webpack:///./src/bridge/index.js","webpack:///./src/bridge/bridge.js","webpack:///./src/bridge/child.js","webpack:///./src/bridge/common.js","webpack:///./src/bridge/parent.js","webpack:///./src/drivers/listeners.js","webpack:///./src/interface/server.js","webpack:///./src/interface/config.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","init","_global","global","initialized","_drivers","listenForMessages","_bridge","openTunnelToOpener","_lib","initOnReady","listenForMethods","reset","clean","all","then","Object","defineProperty","value","Promise","undefined","_interface","keys","forEach","key","enumerable","get","_interopRequireWildcard","obj","__esModule","newObj","prototype","hasOwnProperty","winutil","util","destroyBridges","needsBridgeForDomain","needsBridgeForWin","needsBridgeForBrowser","needsBridge","isBridge","linkUrl","openBridge","parent","_client","_server","_config","_util","_windows","windowUtil","getAncestor","request","options","promise","nodeify","resolve","reject","name","Error","_conf","CONFIG","MOCK_MODE","window","el","document","getElementById","tagName","toLowerCase","contentWindow","HTMLElement","domain","hash","uniqueID","setItem","listeners","response","isWindowClosed","hasResult","respond","err","result","run","isAncestor","onWindowReady","sendMessage","type","CONSTANTS","POST_MESSAGE_TYPE","REQUEST","data","fireAndForget","ackTimeout","intervalTimeout","ACK_TIMEOUT","remaining","ack","cancel","timeout","callback","send","sendToParent","win","client","arguments","length","_send","_constants","_defineProperty","configurable","writable","_ALLOWED_POST_MESSAGE","ALLOW_POSTMESSAGE_POPUP","LOG_LEVEL","BRIDGE_TIMEOUT","LOG_TO_PAGE","ALLOWED_POST_MESSAGE_METHODS","SEND_STRATEGIES","POST_MESSAGE","BRIDGE","GLOBAL","location","href","indexOf","FILE_PROTOCOL","RESPONSE","ACK","POST_MESSAGE_ACK","SUCCESS","ERROR","POST_MESSAGE_NAMES","METHOD","READY","OPEN_TUNNEL","WINDOW_TYPES","FULLPAGE","POPUP","IFRAME","WINDOW_PROPS","POSTROBOT","SERIALIZATION_TYPES","MOCK_PROTOCOL","BRIDGE_NAME_PREFIX","POSTROBOT_PROXY","POST_MESSAGE_NAMES_LIST","map","_receive","_listeners","parseMessage","message","jsonParse","_types","RECEIVE_MESSAGE_TYPES","receiveMessage","event","closed","source","origin","sourceDomain","receivedMessages","push","level","log","logLevel","replace","debug","deserializeMethods","messageListener","sourceElement","originalEvent","_compat","emulateIERestrictions","listener","listen","register","_promise","_log","_methods","_tick","_ready","_cleanup","method","nextTick","_this","_arguments","apply","prom","deNodeify","_len","args","Array","_key","concat","items","results","_loop","i","trycatch","successHandler","errorHandler","flush","isCalled","isError","isSuccess","res","error","addPossiblyUnhandledPromise","possiblyUnhandledPromises","possiblyUnhandledPromiseTimeout","setTimeout","flushPossiblyUnhandledPromises","promises","silentReject","handlers","onError","dispatchError","dispatch","dispatchedErrors","j","possiblyUnhandledPromiseHandlers","isPromise","item","Window","constructor","toString","Function","patchPromise","SyncPromise","handler","resolved","rejected","self","asyncReject","_loop2","shift","onSuccess","count","_loop3","onPossiblyUnhandledException","delay","_loop4","promisifyCall","slice","queue","postMessage","tickMessageName","addEventListener","_typeof","Symbol","iterator","once","called","noop","safeHasProp","safeGetProp","attachEvent","removeEventListener","detachEvent","context","find","collection","def","some","Boolean","mapping","values","getByValue","chars","charAt","Math","floor","random","memoize","JSON","stringify","extend","each","isArray","replaceObject","depth","newobj","safeInterval","time","runInterval","clearTimeout","interval","getDomain","mockDomain","protocol","host","getDomainFromUrl","url","match","split","join","safeGet","prop","LOG_LEVELS","bind","console","clearLogs","clear","container","parentNode","removeChild","writeToPage","createElement","style","cssText","body","appendChild","date","Date","payload","json","jsonStringify","e","msg","innerHTML","color","warn","info","childNodes","insertBefore","unshift","pathname","getWindowType","isSameDomain","_iterator","domainMatches","_isArray","_i","_ref","next","done","domainMatchTimeout","getOpener","opener","getParent","getParents","isAncestorParent","child","childParent","getFrames","frames","len","frame","getAllChildFrames","_iterator2","_isArray2","_i3","_ref2","_iterator3","_isArray3","_i4","_ref3","childFrame","getAllFramesInWindow","_iterator4","_isArray4","_i5","_ref4","_iterator5","_isArray5","_i6","_ref5","getTop","top","_iterator6","_isArray6","_i7","_ref6","allowMock","getUserAgent","navigator","mockUserAgent","userAgent","getFrameByName","winFrames","_iterator7","_isArray7","_i8","_ref7","findChildFrameByName","_iterator8","_isArray8","_i9","_ref8","namedFrame","findFrameByName","isParent","frameParent","_iterator9","_isArray9","_i10","_ref9","isOpener","getAncestors","ancestor","actualParent","_iterator10","_isArray10","_i11","_ref10","isPopup","isIframe","isFullpage","anyMatch","collection1","collection2","_iterator11","_isArray11","_i12","_ref11","item1","_iterator12","_isArray12","_i13","_ref12","item2","isSameTopWindow","win1","win2","top1","top2","allFrames1","allFrames2","opener1","opener2","objectToJSON","arrayToJSON","toJSON","parse","cleanup","registerSelf","tasks","getters","array","object","set","index","splice","complete","hasTasks","filter","pop","toClean","_i2","isSerialized","__type__","serializeMethod","destination","methods","__id__","__name__","serializeError","__message__","stack","serializeMethods","deserializeMethod","wrapper","deserializeError","on","meth","readyPromises","_ie","sourceWindow","targetWindow","matchDomain","_RECEIVE_MESSAGE_TYPE","_extends","assign","target","originalSource","getRequestListener","handleError","buildMessage","windowType","messages","serializedMessage","_strategies","SEND_MESSAGE_STRATEGIES","strategyName","success","status","_SEND_MESSAGE_STRATEG","sendBridgeMessage","foreignGlobal","_child","_common","_parent","openTunnelToParent","canary","remoteWindow","getRemoteBridgeForWindow","getBridgeName","setInterval","clearInterval","registerRemoteWindow","bridge","registerRemoteSendMessage","rejectRemoteSendMessage","sanitizedDomain","sendMessagePromise","remoteWindows","findRemoteWindow","sendMessageWrapper","remoteWin","remoteDomain","messagingChild","messagingParent","documentBodyReady","listenForRegister","winDetails","popupWindows","openBridgeFrame","iframe","setAttribute","src","bridges","onload","onerror","winOptions","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","TypeError","windowOpen","open","last","_url$split","_url$split2","resetListeners","isRegex","requestListener","specifiedWin","specifiedDomain","matchedWin","matchedDomain","removeRequestListener","addRequestListener","override","errorOnClose","myListener","_on","enableMockMode","disableMockMode","disable"],"mappings":"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","file":"post-robot.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"postRobot\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"postRobot\"] = factory();\n\telse\n\t\troot[\"postRobot\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"postRobot\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"postRobot\"] = factory();\n\telse\n\t\troot[\"postRobot\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.Promise = undefined;\n\texports.init = init;\n\texports.reset = reset;\n\t\n\tvar _interface = __webpack_require__(1);\n\t\n\tObject.keys(_interface).forEach(function (key) {\n\t    if (key === \"default\" || key === \"__esModule\") return;\n\t    Object.defineProperty(exports, key, {\n\t        enumerable: true,\n\t        get: function get() {\n\t            return _interface[key];\n\t        }\n\t    });\n\t});\n\t\n\tvar _lib = __webpack_require__(8);\n\t\n\tObject.defineProperty(exports, 'Promise', {\n\t    enumerable: true,\n\t    get: function get() {\n\t        return _lib.Promise;\n\t    }\n\t});\n\t\n\tvar _drivers = __webpack_require__(6);\n\t\n\tvar _global = __webpack_require__(15);\n\t\n\tvar _bridge = __webpack_require__(24);\n\t\n\tfunction init() {\n\t\n\t    if (!_global.global.initialized) {\n\t        (0, _drivers.listenForMessages)();\n\t        (0, _bridge.openTunnelToOpener)();\n\t        (0, _lib.initOnReady)();\n\t        (0, _lib.listenForMethods)();\n\t    }\n\t\n\t    _global.global.initialized = true;\n\t}\n\t\n\tinit();\n\t\n\tfunction reset() {\n\t    return _global.global.clean.all().then(function () {\n\t        _global.global.initialized = false;\n\t        return init();\n\t    });\n\t}\n\t\n\texports['default'] = module.exports;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.winutil = exports.util = exports.destroyBridges = exports.openTunnelToOpener = exports.needsBridgeForDomain = exports.needsBridgeForWin = exports.needsBridgeForBrowser = exports.needsBridge = exports.isBridge = exports.linkUrl = exports.openBridge = exports.parent = undefined;\n\t\n\tvar _client = __webpack_require__(2);\n\t\n\tObject.keys(_client).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _client[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _server = __webpack_require__(30);\n\t\n\tObject.keys(_server).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _server[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _config = __webpack_require__(31);\n\t\n\tObject.keys(_config).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _config[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _bridge = __webpack_require__(24);\n\t\n\tObject.defineProperty(exports, 'openBridge', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _bridge.openBridge;\n\t  }\n\t});\n\tObject.defineProperty(exports, 'linkUrl', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _bridge.linkUrl;\n\t  }\n\t});\n\tObject.defineProperty(exports, 'isBridge', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _bridge.isBridge;\n\t  }\n\t});\n\tObject.defineProperty(exports, 'needsBridge', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _bridge.needsBridge;\n\t  }\n\t});\n\tObject.defineProperty(exports, 'needsBridgeForBrowser', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _bridge.needsBridgeForBrowser;\n\t  }\n\t});\n\tObject.defineProperty(exports, 'needsBridgeForWin', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _bridge.needsBridgeForWin;\n\t  }\n\t});\n\tObject.defineProperty(exports, 'needsBridgeForDomain', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _bridge.needsBridgeForDomain;\n\t  }\n\t});\n\tObject.defineProperty(exports, 'openTunnelToOpener', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _bridge.openTunnelToOpener;\n\t  }\n\t});\n\tObject.defineProperty(exports, 'destroyBridges', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _bridge.destroyBridges;\n\t  }\n\t});\n\t\n\tvar _util = __webpack_require__(12);\n\t\n\tObject.defineProperty(exports, 'util', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _util.util;\n\t  }\n\t});\n\t\n\tvar _windows = __webpack_require__(14);\n\t\n\tvar windowUtil = _interopRequireWildcard(_windows);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\t\n\tvar parent = exports.parent = (0, _windows.getAncestor)();\n\t\n\tvar winutil = exports.winutil = windowUtil;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.send = undefined;\n\texports.request = request;\n\texports.sendToParent = sendToParent;\n\texports.client = client;\n\t\n\tvar _conf = __webpack_require__(3);\n\t\n\tvar _drivers = __webpack_require__(6);\n\t\n\tvar _global = __webpack_require__(15);\n\t\n\tvar _lib = __webpack_require__(8);\n\t\n\tfunction request(options) {\n\t\n\t    return _lib.promise.nodeify(new _lib.promise.Promise(function (resolve, reject) {\n\t\n\t        if (!options.name) {\n\t            throw new Error('Expected options.name');\n\t        }\n\t\n\t        if (_conf.CONFIG.MOCK_MODE) {\n\t            options.window = window;\n\t        } else if (typeof options.window === 'string') {\n\t            var el = document.getElementById(options.window);\n\t\n\t            if (!el) {\n\t                throw new Error('Expected options.window ' + options.window + ' to be a valid element id');\n\t            }\n\t\n\t            if (el.tagName.toLowerCase() !== 'iframe') {\n\t                throw new Error('Expected options.window ' + options.window + ' to be an iframe');\n\t            }\n\t\n\t            if (!el.contentWindow) {\n\t                throw new Error('Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.');\n\t            }\n\t\n\t            options.window = el.contentWindow;\n\t        } else if (options.window instanceof HTMLElement) {\n\t\n\t            if (options.window.tagName.toLowerCase() !== 'iframe') {\n\t                throw new Error('Expected options.window ' + options.window + ' to be an iframe');\n\t            }\n\t\n\t            if (!options.window.contentWindow) {\n\t                throw new Error('Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.');\n\t            }\n\t\n\t            options.window = options.window.contentWindow;\n\t        }\n\t\n\t        if (!options.window) {\n\t            throw new Error('Expected options.window to be a window object, iframe, or iframe element id.');\n\t        }\n\t\n\t        options.domain = options.domain || '*';\n\t\n\t        var hash = options.name + '_' + _lib.util.uniqueID();\n\t        _global.global.clean.setItem(_global.global.listeners.response, hash, options);\n\t\n\t        if ((0, _lib.isWindowClosed)(options.window)) {\n\t            throw new Error('Target window is closed');\n\t        }\n\t\n\t        var hasResult = false;\n\t\n\t        options.respond = function (err, result) {\n\t            if (!err) {\n\t                hasResult = true;\n\t            }\n\t\n\t            return err ? reject(err) : resolve(result);\n\t        };\n\t\n\t        return _lib.promise.run(function () {\n\t\n\t            if ((0, _lib.isAncestor)(window, options.window)) {\n\t                return (0, _lib.onWindowReady)(options.window);\n\t            }\n\t        }).then(function () {\n\t\n\t            (0, _drivers.sendMessage)(options.window, {\n\t                hash: hash,\n\t                type: _conf.CONSTANTS.POST_MESSAGE_TYPE.REQUEST,\n\t                name: options.name,\n\t                data: options.data,\n\t                fireAndForget: options.fireAndForget\n\t            }, options.domain)['catch'](reject);\n\t\n\t            if (options.fireAndForget) {\n\t                return resolve();\n\t            }\n\t\n\t            var ackTimeout = _lib.util.intervalTimeout(_conf.CONFIG.ACK_TIMEOUT, 100, function (remaining) {\n\t\n\t                if (options.ack || (0, _lib.isWindowClosed)(options.window)) {\n\t                    return ackTimeout.cancel();\n\t                }\n\t\n\t                if (!remaining) {\n\t                    return reject(new Error('No ack for postMessage ' + options.name + ' in ' + _conf.CONFIG.ACK_TIMEOUT + 'ms'));\n\t                }\n\t            });\n\t\n\t            if (options.timeout) {\n\t                var timeout = _lib.util.intervalTimeout(options.timeout, 100, function (remaining) {\n\t\n\t                    if (hasResult || (0, _lib.isWindowClosed)(options.window)) {\n\t                        return timeout.cancel();\n\t                    }\n\t\n\t                    if (!remaining) {\n\t                        return reject(new Error('Post message response timed out after ' + options.timeout + ' ms'));\n\t                    }\n\t                }, options.timeout);\n\t            }\n\t        })['catch'](reject);\n\t    }), options.callback);\n\t}\n\t\n\tfunction _send(window, name, data, options, callback) {\n\t\n\t    if (!callback) {\n\t        if (!options && typeof data === 'function') {\n\t            callback = data;\n\t            options = {};\n\t            data = {};\n\t        } else if (typeof options === 'function') {\n\t            callback = options;\n\t            options = {};\n\t        }\n\t    }\n\t\n\t    options = options || {};\n\t    options.window = window;\n\t    options.name = name;\n\t    options.data = data;\n\t    options.callback = callback;\n\t\n\t    return request(options);\n\t}\n\t\n\texports.send = _send;\n\tfunction sendToParent(name, data, options, callback) {\n\t\n\t    var win = (0, _lib.getAncestor)();\n\t\n\t    if (!win) {\n\t        return new _lib.promise.Promise(function (resolve, reject) {\n\t            return reject(new Error('Window does not have a parent'));\n\t        });\n\t    }\n\t\n\t    return _send(win, name, data, options, callback);\n\t}\n\t\n\tfunction client() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t\n\t    if (!options.window) {\n\t        throw new Error('Expected options.window');\n\t    }\n\t\n\t    return {\n\t        send: function send(name, data, callback) {\n\t            return _send(options.window, name, data, options, callback);\n\t        }\n\t    };\n\t}\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _config = __webpack_require__(4);\n\t\n\tObject.keys(_config).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _config[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _constants = __webpack_require__(5);\n\t\n\tObject.keys(_constants).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _constants[key];\n\t    }\n\t  });\n\t});\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.CONFIG = undefined;\n\t\n\tvar _ALLOWED_POST_MESSAGE;\n\t\n\tvar _constants = __webpack_require__(5);\n\t\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\tvar CONFIG = exports.CONFIG = {\n\t\n\t    ALLOW_POSTMESSAGE_POPUP:  false ? false : true,\n\t\n\t    LOG_LEVEL: 'info',\n\t\n\t    BRIDGE_TIMEOUT: 5000,\n\t    ACK_TIMEOUT: 1000,\n\t\n\t    LOG_TO_PAGE: false,\n\t\n\t    MOCK_MODE: false,\n\t\n\t    ALLOWED_POST_MESSAGE_METHODS: (_ALLOWED_POST_MESSAGE = {}, _defineProperty(_ALLOWED_POST_MESSAGE, _constants.CONSTANTS.SEND_STRATEGIES.POST_MESSAGE, true), _defineProperty(_ALLOWED_POST_MESSAGE, _constants.CONSTANTS.SEND_STRATEGIES.BRIDGE, true), _defineProperty(_ALLOWED_POST_MESSAGE, _constants.CONSTANTS.SEND_STRATEGIES.GLOBAL, true), _ALLOWED_POST_MESSAGE)\n\t};\n\t\n\tif (window.location.href.indexOf(_constants.CONSTANTS.FILE_PROTOCOL) === 0) {\n\t    CONFIG.ALLOW_POSTMESSAGE_POPUP = true;\n\t}\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\tvar CONSTANTS = exports.CONSTANTS = {\n\t\n\t    POST_MESSAGE_TYPE: {\n\t        REQUEST: 'postrobot_message_request',\n\t        RESPONSE: 'postrobot_message_response',\n\t        ACK: 'postrobot_message_ack'\n\t    },\n\t\n\t    POST_MESSAGE_ACK: {\n\t        SUCCESS: 'success',\n\t        ERROR: 'error'\n\t    },\n\t\n\t    POST_MESSAGE_NAMES: {\n\t        METHOD: 'postrobot_method',\n\t        READY: 'postrobot_ready',\n\t        OPEN_TUNNEL: 'postrobot_open_tunnel'\n\t    },\n\t\n\t    WINDOW_TYPES: {\n\t        FULLPAGE: 'fullpage',\n\t        POPUP: 'popup',\n\t        IFRAME: 'iframe'\n\t    },\n\t\n\t    WINDOW_PROPS: {\n\t        POSTROBOT: '__postRobot__'\n\t    },\n\t\n\t    SERIALIZATION_TYPES: {\n\t        METHOD: 'postrobot_method',\n\t        ERROR: 'postrobot_error'\n\t    },\n\t\n\t    SEND_STRATEGIES: {\n\t        POST_MESSAGE: 'postrobot_post_message',\n\t        BRIDGE: 'postrobot_bridge',\n\t        GLOBAL: 'postrobot_global'\n\t    },\n\t\n\t    MOCK_PROTOCOL: 'mock:',\n\t    FILE_PROTOCOL: 'file:',\n\t\n\t    BRIDGE_NAME_PREFIX: '__postrobot_bridge__',\n\t    POSTROBOT_PROXY: '__postrobot_proxy__'\n\t};\n\t\n\tvar POST_MESSAGE_NAMES_LIST = exports.POST_MESSAGE_NAMES_LIST = Object.keys(CONSTANTS.POST_MESSAGE_NAMES).map(function (key) {\n\t    return CONSTANTS.POST_MESSAGE_NAMES[key];\n\t});\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _receive = __webpack_require__(7);\n\t\n\tObject.keys(_receive).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _receive[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _send = __webpack_require__(22);\n\t\n\tObject.keys(_send).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _send[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _listeners = __webpack_require__(29);\n\t\n\tObject.keys(_listeners).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _listeners[key];\n\t    }\n\t  });\n\t});\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.receiveMessage = receiveMessage;\n\texports.messageListener = messageListener;\n\texports.listenForMessages = listenForMessages;\n\t\n\tvar _conf = __webpack_require__(3);\n\t\n\tvar _lib = __webpack_require__(8);\n\t\n\tvar _compat = __webpack_require__(19);\n\t\n\tvar _global = __webpack_require__(15);\n\t\n\tvar _types = __webpack_require__(21);\n\t\n\t_global.global.receivedMessages = _global.global.receivedMessages || [];\n\t\n\tfunction parseMessage(message) {\n\t\n\t    try {\n\t        message = (0, _lib.jsonParse)(message);\n\t    } catch (err) {\n\t        return;\n\t    }\n\t\n\t    if (!message) {\n\t        return;\n\t    }\n\t\n\t    message = message[_conf.CONSTANTS.WINDOW_PROPS.POSTROBOT];\n\t\n\t    if (!message) {\n\t        return;\n\t    }\n\t\n\t    if (!message.type) {\n\t        return;\n\t    }\n\t\n\t    if (!_types.RECEIVE_MESSAGE_TYPES[message.type]) {\n\t        return;\n\t    }\n\t\n\t    return message;\n\t}\n\t\n\tfunction receiveMessage(event) {\n\t\n\t    if (!window || window.closed) {\n\t        throw new Error('Message recieved in closed window');\n\t    }\n\t\n\t    try {\n\t        if (!event.source) {\n\t            return;\n\t        }\n\t    } catch (err) {\n\t        return;\n\t    }\n\t\n\t    var source = event.source,\n\t        origin = event.origin,\n\t        data = event.data;\n\t\n\t\n\t    var message = parseMessage(data);\n\t\n\t    if (!message) {\n\t        return;\n\t    }\n\t\n\t    if (message.sourceDomain.indexOf(_conf.CONSTANTS.MOCK_PROTOCOL) === 0 || message.sourceDomain.indexOf(_conf.CONSTANTS.FILE_PROTOCOL) === 0) {\n\t        origin = message.sourceDomain;\n\t    }\n\t\n\t    if (_global.global.receivedMessages.indexOf(message.id) === -1) {\n\t        _global.global.clean.push(_global.global.receivedMessages, message.id);\n\t    } else {\n\t        return;\n\t    }\n\t\n\t    var level = void 0;\n\t\n\t    if (_conf.POST_MESSAGE_NAMES_LIST.indexOf(message.name) !== -1 || message.type === _conf.CONSTANTS.POST_MESSAGE_TYPE.ACK) {\n\t        level = 'debug';\n\t    } else if (message.ack === 'error') {\n\t        level = 'error';\n\t    } else {\n\t        level = 'info';\n\t    }\n\t\n\t    _lib.log.logLevel(level, ['\\n\\n\\t', '#receive', message.type.replace(/^postrobot_message_/, ''), '::', message.name, '::', origin, '\\n\\n', message]);\n\t\n\t    if ((0, _lib.isWindowClosed)(source)) {\n\t        return _lib.log.debug('Source window is closed - can not send ' + message.type + ' ' + message.name);\n\t    }\n\t\n\t    if (message.data) {\n\t        message.data = (0, _lib.deserializeMethods)(source, origin, message.data);\n\t    }\n\t\n\t    _types.RECEIVE_MESSAGE_TYPES[message.type](source, origin, message);\n\t}\n\t\n\tfunction messageListener(event) {\n\t\n\t    try {\n\t        event.source; // eslint-disable-line\n\t    } catch (err) {\n\t        return;\n\t    }\n\t\n\t    event = {\n\t        source: event.source || event.sourceElement,\n\t        origin: event.origin || event.originalEvent.origin,\n\t        data: event.data\n\t    };\n\t\n\t    try {\n\t        (0, _compat.emulateIERestrictions)(event.source, window);\n\t    } catch (err) {\n\t        return;\n\t    }\n\t\n\t    receiveMessage(event);\n\t}\n\t\n\tfunction listenForMessages() {\n\t    var listener = _lib.util.listen(window, 'message', messageListener);\n\t\n\t    _global.global.clean.register('listener', function () {\n\t        listener.cancel();\n\t    });\n\t}\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _promise = __webpack_require__(9);\n\t\n\tObject.keys(_promise).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _promise[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _util = __webpack_require__(12);\n\t\n\tObject.keys(_util).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _util[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _log = __webpack_require__(13);\n\t\n\tObject.keys(_log).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _log[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _windows = __webpack_require__(14);\n\t\n\tObject.keys(_windows).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _windows[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _methods = __webpack_require__(17);\n\t\n\tObject.keys(_methods).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _methods[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _tick = __webpack_require__(11);\n\t\n\tObject.keys(_tick).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _tick[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _ready = __webpack_require__(18);\n\t\n\tObject.keys(_ready).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _ready[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _cleanup = __webpack_require__(16);\n\t\n\tObject.keys(_cleanup).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _cleanup[key];\n\t    }\n\t  });\n\t});\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.promise = exports.Promise = undefined;\n\t\n\tvar _promise = __webpack_require__(10);\n\t\n\tvar _tick = __webpack_require__(11);\n\t\n\tvar Promise = exports.Promise = _promise.SyncPromise;\n\t\n\tvar promise = exports.promise = {\n\t\n\t    Promise: Promise,\n\t\n\t    run: function run(method) {\n\t        return Promise.resolve().then(method);\n\t    },\n\t    nextTick: function nextTick(method) {\n\t        return new Promise(function (resolve, reject) {\n\t            (0, _tick.nextTick)(function () {\n\t                return promise.run(method).then(resolve, reject);\n\t            });\n\t        });\n\t    },\n\t    method: function method(_method) {\n\t        return function promiseWrapper() {\n\t            var _this = this,\n\t                _arguments = arguments;\n\t\n\t            return Promise.resolve().then(function () {\n\t                return _method.apply(_this, _arguments);\n\t            });\n\t        };\n\t    },\n\t    nodeify: function nodeify(prom, callback) {\n\t        if (!callback) {\n\t            return prom;\n\t        }\n\t        prom.then(function (result) {\n\t            callback(null, result);\n\t        }, function (err) {\n\t            callback(err);\n\t        });\n\t    },\n\t    deNodeify: function deNodeify(method) {\n\t        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t            args[_key - 1] = arguments[_key];\n\t        }\n\t\n\t        return new Promise(function (resolve, reject) {\n\t            try {\n\t                if (args.length < method.length) {\n\t                    return method.apply(undefined, args.concat([function (err, result) {\n\t                        return err ? reject(err) : resolve(result);\n\t                    }]));\n\t                }\n\t\n\t                return promise.run(function () {\n\t                    return method.apply(undefined, args);\n\t                }).then(resolve, reject);\n\t            } catch (err) {\n\t                return reject(err);\n\t            }\n\t        });\n\t    },\n\t    map: function map(items, method) {\n\t\n\t        var results = [];\n\t\n\t        var _loop = function _loop(i) {\n\t            results.push(promise.run(function () {\n\t                return method(items[i]);\n\t            }));\n\t        };\n\t\n\t        for (var i = 0; i < items.length; i++) {\n\t            _loop(i);\n\t        }\n\t        return Promise.all(results);\n\t    }\n\t};\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.patchPromise = patchPromise;\n\t\n\tfunction trycatch(method, successHandler, errorHandler) {\n\t\n\t    var isCalled = false;\n\t    var isSuccess = false;\n\t    var isError = false;\n\t    var err = void 0,\n\t        res = void 0;\n\t\n\t    function flush() {\n\t        if (isCalled) {\n\t            if (isError) {\n\t                return errorHandler(err);\n\t            } else if (isSuccess) {\n\t                return successHandler(res);\n\t            }\n\t        }\n\t    }\n\t\n\t    try {\n\t        method(function (result) {\n\t            res = result;\n\t            isSuccess = true;\n\t            flush();\n\t        }, function (error) {\n\t            err = error;\n\t            isError = true;\n\t            flush();\n\t        });\n\t    } catch (error) {\n\t        return errorHandler(error);\n\t    }\n\t\n\t    isCalled = true;\n\t    flush();\n\t}\n\t\n\tvar possiblyUnhandledPromiseHandlers = [];\n\tvar possiblyUnhandledPromises = [];\n\tvar possiblyUnhandledPromiseTimeout = void 0;\n\t\n\tfunction addPossiblyUnhandledPromise(promise) {\n\t    possiblyUnhandledPromises.push(promise);\n\t    possiblyUnhandledPromiseTimeout = possiblyUnhandledPromiseTimeout || setTimeout(flushPossiblyUnhandledPromises, 1);\n\t}\n\t\n\tfunction flushPossiblyUnhandledPromises() {\n\t\n\t    possiblyUnhandledPromiseTimeout = null;\n\t    var promises = possiblyUnhandledPromises;\n\t    possiblyUnhandledPromises = [];\n\t\n\t    var _loop = function _loop(i) {\n\t        var promise = promises[i];\n\t\n\t        if (promise.silentReject) {\n\t            return 'continue';\n\t        }\n\t\n\t        promise.handlers.push({\n\t            onError: function onError(err) {\n\t                if (promise.silentReject) {\n\t                    return;\n\t                }\n\t\n\t                dispatchError(err);\n\t            }\n\t        });\n\t\n\t        promise.dispatch();\n\t    };\n\t\n\t    for (var i = 0; i < promises.length; i++) {\n\t        var _ret = _loop(i);\n\t\n\t        if (_ret === 'continue') continue;\n\t    }\n\t}\n\t\n\tvar dispatchedErrors = [];\n\t\n\tfunction dispatchError(err) {\n\t\n\t    if (dispatchedErrors.indexOf(err) !== -1) {\n\t        return;\n\t    }\n\t\n\t    dispatchedErrors.push(err);\n\t\n\t    setTimeout(function () {\n\t        throw err;\n\t    }, 1);\n\t\n\t    for (var j = 0; j < possiblyUnhandledPromiseHandlers.length; j++) {\n\t        possiblyUnhandledPromiseHandlers[j](err);\n\t    }\n\t}\n\t\n\tvar toString = {}.toString;\n\t\n\tfunction isPromise(item) {\n\t    try {\n\t        if (!item) {\n\t            return false;\n\t        }\n\t\n\t        if (window.Window && item instanceof window.Window) {\n\t            return false;\n\t        }\n\t\n\t        if (window.constructor && item instanceof window.constructor) {\n\t            return false;\n\t        }\n\t\n\t        if (toString) {\n\t            var name = toString.call(item);\n\t\n\t            if (name === '[object Window]' || name === '[object global]' || name === '[object DOMWindow]') {\n\t                return false;\n\t            }\n\t        }\n\t\n\t        if (item && item.then instanceof Function) {\n\t            return true;\n\t        }\n\t    } catch (err) {\n\t        return false;\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tvar SyncPromise = exports.SyncPromise = function SyncPromise(handler) {\n\t\n\t    this.resolved = false;\n\t    this.rejected = false;\n\t\n\t    this.silentReject = false;\n\t\n\t    this.handlers = [];\n\t\n\t    addPossiblyUnhandledPromise(this);\n\t\n\t    if (!handler) {\n\t        return;\n\t    }\n\t\n\t    var self = this;\n\t\n\t    trycatch(handler, function (res) {\n\t        return self.resolve(res);\n\t    }, function (err) {\n\t        return self.reject(err);\n\t    });\n\t};\n\t\n\tSyncPromise.resolve = function SyncPromiseResolve(value) {\n\t\n\t    if (isPromise(value)) {\n\t        return value;\n\t    }\n\t\n\t    return new SyncPromise().resolve(value);\n\t};\n\t\n\tSyncPromise.reject = function SyncPromiseResolve(error) {\n\t    return new SyncPromise().reject(error);\n\t};\n\t\n\tSyncPromise.prototype.resolve = function (result) {\n\t    if (this.resolved || this.rejected) {\n\t        return this;\n\t    }\n\t\n\t    if (isPromise(result)) {\n\t        throw new Error('Can not resolve promise with another promise');\n\t    }\n\t\n\t    this.resolved = true;\n\t    this.value = result;\n\t    this.dispatch();\n\t\n\t    return this;\n\t};\n\t\n\tSyncPromise.prototype.reject = function (error) {\n\t    if (this.resolved || this.rejected) {\n\t        return this;\n\t    }\n\t\n\t    if (isPromise(error)) {\n\t        throw new Error('Can not reject promise with another promise');\n\t    }\n\t\n\t    this.rejected = true;\n\t    this.value = error;\n\t    this.dispatch();\n\t\n\t    return this;\n\t};\n\t\n\tSyncPromise.prototype.asyncReject = function (error) {\n\t    this.silentReject = true;\n\t    this.reject(error);\n\t};\n\t\n\tSyncPromise.prototype.dispatch = function () {\n\t    var _this = this;\n\t\n\t    if (!this.resolved && !this.rejected) {\n\t        return;\n\t    }\n\t\n\t    var _loop2 = function _loop2() {\n\t\n\t        var handler = _this.handlers.shift();\n\t\n\t        var result = void 0,\n\t            error = void 0;\n\t\n\t        try {\n\t            if (_this.resolved) {\n\t                result = handler.onSuccess ? handler.onSuccess(_this.value) : _this.value;\n\t            } else if (_this.rejected) {\n\t                if (handler.onError) {\n\t                    result = handler.onError(_this.value);\n\t                } else {\n\t                    error = _this.value;\n\t                }\n\t            }\n\t        } catch (err) {\n\t            error = err;\n\t        }\n\t\n\t        if (result === _this) {\n\t            throw new Error('Can not return a promise from the the then handler of the same promise');\n\t        }\n\t\n\t        if (!handler.promise) {\n\t            return 'continue';\n\t        }\n\t\n\t        if (error) {\n\t            handler.promise.reject(error);\n\t        } else if (isPromise(result)) {\n\t            result.then(function (res) {\n\t                handler.promise.resolve(res);\n\t            }, function (err) {\n\t                handler.promise.reject(err);\n\t            });\n\t        } else {\n\t            handler.promise.resolve(result);\n\t        }\n\t    };\n\t\n\t    while (this.handlers.length) {\n\t        var _ret2 = _loop2();\n\t\n\t        if (_ret2 === 'continue') continue;\n\t    }\n\t};\n\t\n\tSyncPromise.prototype.then = function (onSuccess, onError) {\n\t\n\t    if (onSuccess && typeof onSuccess !== 'function' && !onSuccess.call) {\n\t        throw new Error('Promise.then expected a function for success handler');\n\t    }\n\t\n\t    if (onError && typeof onError !== 'function' && !onError.call) {\n\t        throw new Error('Promise.then expected a function for error handler');\n\t    }\n\t\n\t    var promise = new SyncPromise(null, this);\n\t\n\t    this.handlers.push({\n\t        promise: promise,\n\t        onSuccess: onSuccess,\n\t        onError: onError\n\t    });\n\t\n\t    this.silentReject = true;\n\t\n\t    this.dispatch();\n\t\n\t    return promise;\n\t};\n\t\n\tSyncPromise.prototype['catch'] = function (onError) {\n\t    return this.then(null, onError);\n\t};\n\t\n\tSyncPromise.prototype['finally'] = function (handler) {\n\t    return this.then(function (result) {\n\t        return SyncPromise['try'](handler).then(function () {\n\t            return result;\n\t        });\n\t    }, function (err) {\n\t        return SyncPromise['try'](handler).then(function () {\n\t            throw err;\n\t        });\n\t    });\n\t};\n\t\n\tSyncPromise.all = function (promises) {\n\t\n\t    var promise = new SyncPromise();\n\t    var count = promises.length;\n\t    var results = [];\n\t\n\t    var _loop3 = function _loop3(i) {\n\t\n\t        var prom = isPromise(promises[i]) ? promises[i] : SyncPromise.resolve(promises[i]);\n\t\n\t        prom.then(function (result) {\n\t            results[i] = result;\n\t            count -= 1;\n\t            if (count === 0) {\n\t                promise.resolve(results);\n\t            }\n\t        }, function (err) {\n\t            promise.reject(err);\n\t        });\n\t    };\n\t\n\t    for (var i = 0; i < promises.length; i++) {\n\t        _loop3(i);\n\t    }\n\t\n\t    if (!count) {\n\t        promise.resolve(results);\n\t    }\n\t\n\t    return promise;\n\t};\n\t\n\tSyncPromise.onPossiblyUnhandledException = function syncPromiseOnPossiblyUnhandledException(handler) {\n\t    possiblyUnhandledPromiseHandlers.push(handler);\n\t};\n\t\n\tSyncPromise['try'] = function syncPromiseTry(method) {\n\t    return SyncPromise.resolve().then(method);\n\t};\n\t\n\tSyncPromise.delay = function syncPromiseDelay(delay) {\n\t    return new SyncPromise(function (resolve) {\n\t        setTimeout(resolve, delay);\n\t    });\n\t};\n\t\n\tSyncPromise.hash = function (obj) {\n\t\n\t    var results = {};\n\t    var promises = [];\n\t\n\t    var _loop4 = function _loop4(key) {\n\t        if (obj.hasOwnProperty(key)) {\n\t            promises.push(SyncPromise.resolve(obj[key]).then(function (result) {\n\t                results[key] = result;\n\t            }));\n\t        }\n\t    };\n\t\n\t    for (var key in obj) {\n\t        _loop4(key);\n\t    }\n\t\n\t    return SyncPromise.all(promises).then(function () {\n\t        return results;\n\t    });\n\t};\n\t\n\tSyncPromise.promisifyCall = function () {\n\t\n\t    var args = Array.prototype.slice.call(arguments);\n\t    var method = args.shift();\n\t\n\t    if (typeof method !== 'function') {\n\t        throw new Error('Expected promisifyCall to be called with a function');\n\t    }\n\t\n\t    return new SyncPromise(function (resolve, reject) {\n\t\n\t        args.push(function (err, result) {\n\t            return err ? reject(err) : resolve(result);\n\t        });\n\t\n\t        return method.apply(null, args);\n\t    });\n\t};\n\t\n\tfunction patchPromise() {\n\t    window.Promise = SyncPromise;\n\t}\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.nextTick = nextTick;\n\t\n\tvar _util = __webpack_require__(12);\n\t\n\tvar tickMessageName = '__nextTick__postRobot__' + _util.util.uniqueID();\n\tvar queue = [];\n\t\n\twindow.addEventListener('message', function (event) {\n\t    if (event.data === tickMessageName) {\n\t        var method = queue.shift();\n\t        method.call();\n\t    }\n\t});\n\t\n\tfunction nextTick(method) {\n\t\n\t    queue.push(method);\n\t    window.postMessage(tickMessageName, '*');\n\t}\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.util = undefined;\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _conf = __webpack_require__(3);\n\t\n\tvar util = exports.util = {\n\t    once: function once(method) {\n\t        if (!method) {\n\t            return method;\n\t        }\n\t        var called = false;\n\t        return function onceWrapper() {\n\t            if (!called) {\n\t                called = true;\n\t                return method.apply(this, arguments);\n\t            }\n\t        };\n\t    },\n\t    noop: function noop() {},\n\t    // eslint-disable-line no-empty-function\n\t\n\t    safeHasProp: function safeHasProp(obj, name) {\n\t        try {\n\t            if (obj[name]) {\n\t                return true;\n\t            } else {\n\t                return false;\n\t            }\n\t        } catch (err) {\n\t            return false;\n\t        }\n\t    },\n\t    safeGetProp: function safeGetProp(obj, name) {\n\t        try {\n\t            return obj[name];\n\t        } catch (err) {\n\t            return;\n\t        }\n\t    },\n\t    listen: function listen(win, event, handler) {\n\t        if (win.addEventListener) {\n\t            win.addEventListener(event, handler);\n\t        } else {\n\t            win.attachEvent('on' + event, handler);\n\t        }\n\t\n\t        return {\n\t            cancel: function cancel() {\n\t                if (win.removeEventListener) {\n\t                    win.removeEventListener(event, handler);\n\t                } else {\n\t                    win.detachEvent('on' + event, handler);\n\t                }\n\t            }\n\t        };\n\t    },\n\t    apply: function apply(method, context, args) {\n\t        if (typeof method.apply === 'function') {\n\t            return method.apply(context, args);\n\t        }\n\t        return method(args[0], args[1], args[2], args[3], args[4], args[5], args[6], args[7], args[8], args[9]);\n\t    },\n\t    find: function find(collection, method, def) {\n\t        if (!collection) {\n\t            return def;\n\t        }\n\t        for (var i = 0; i < collection.length; i++) {\n\t            if (method(collection[i])) {\n\t                return collection[i];\n\t            }\n\t        }\n\t        return def;\n\t    },\n\t    map: function map(collection, method) {\n\t        var results = [];\n\t        for (var i = 0; i < collection.length; i++) {\n\t            results.push(method(collection[i]));\n\t        }\n\t        return results;\n\t    },\n\t    some: function some(collection, method) {\n\t        method = method || Boolean;\n\t        for (var i = 0; i < collection.length; i++) {\n\t            if (method(collection[i])) {\n\t                return true;\n\t            }\n\t        }\n\t        return false;\n\t    },\n\t    keys: function keys(mapping) {\n\t        var result = [];\n\t        for (var key in mapping) {\n\t            if (mapping.hasOwnProperty(key)) {\n\t                result.push(key);\n\t            }\n\t        }\n\t        return result;\n\t    },\n\t    values: function values(mapping) {\n\t        var result = [];\n\t        for (var key in mapping) {\n\t            if (mapping.hasOwnProperty(key)) {\n\t                result.push(mapping[key]);\n\t            }\n\t        }\n\t        return result;\n\t    },\n\t    getByValue: function getByValue(mapping, value) {\n\t        for (var key in mapping) {\n\t            if (mapping.hasOwnProperty(key) && mapping[key] === value) {\n\t                return key;\n\t            }\n\t        }\n\t    },\n\t    uniqueID: function uniqueID() {\n\t\n\t        var chars = '0123456789abcdef';\n\t\n\t        return 'xxxxxxxxxx'.replace(/./g, function () {\n\t            return chars.charAt(Math.floor(Math.random() * chars.length));\n\t        });\n\t    },\n\t    memoize: function memoize(method) {\n\t\n\t        var results = {};\n\t\n\t        return function memoized() {\n\t            var args = JSON.stringify(Array.prototype.slice.call(arguments));\n\t            if (!results.hasOwnProperty(args)) {\n\t                results[args] = method.apply(this, arguments);\n\t            }\n\t            return results[args];\n\t        };\n\t    },\n\t    extend: function extend(obj, source) {\n\t        if (!source) {\n\t            return obj;\n\t        }\n\t\n\t        for (var key in source) {\n\t            if (source.hasOwnProperty(key)) {\n\t                obj[key] = source[key];\n\t            }\n\t        }\n\t\n\t        return obj;\n\t    },\n\t    each: function each(obj, callback) {\n\t        if (Array.isArray(obj)) {\n\t            for (var i = 0; i < obj.length; i++) {\n\t                callback(obj[i], i);\n\t            }\n\t        } else if ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) === 'object' && obj !== null) {\n\t            for (var key in obj) {\n\t                if (obj.hasOwnProperty(key)) {\n\t                    callback(obj[key], key);\n\t                }\n\t            }\n\t        }\n\t    },\n\t    replaceObject: function replaceObject(obj, callback) {\n\t        var depth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\t\n\t\n\t        if (depth >= 100) {\n\t            throw new Error('Self-referential object passed, or object contained too many layers');\n\t        }\n\t\n\t        var newobj = Array.isArray(obj) ? [] : {};\n\t\n\t        util.each(obj, function (item, key) {\n\t\n\t            var result = callback(item, key);\n\t\n\t            if (result !== undefined) {\n\t                newobj[key] = result;\n\t            } else if ((typeof item === 'undefined' ? 'undefined' : _typeof(item)) === 'object' && item !== null) {\n\t                newobj[key] = util.replaceObject(item, callback, depth + 1);\n\t            } else {\n\t                newobj[key] = item;\n\t            }\n\t        });\n\t\n\t        return newobj;\n\t    },\n\t    safeInterval: function safeInterval(method, time) {\n\t        var timeout = void 0;\n\t\n\t        function runInterval() {\n\t            timeout = setTimeout(runInterval, time);\n\t            method.call();\n\t        }\n\t\n\t        timeout = setTimeout(runInterval, time);\n\t\n\t        return {\n\t            cancel: function cancel() {\n\t                clearTimeout(timeout);\n\t            }\n\t        };\n\t    },\n\t    intervalTimeout: function intervalTimeout(time, interval, method) {\n\t\n\t        var safeInterval = util.safeInterval(function () {\n\t            time -= interval;\n\t\n\t            time = time <= 0 ? 0 : time;\n\t\n\t            if (time === 0) {\n\t                safeInterval.cancel();\n\t            }\n\t\n\t            method(time);\n\t        }, interval);\n\t\n\t        return safeInterval;\n\t    },\n\t    getDomain: function getDomain(win) {\n\t\n\t        win = win || window;\n\t\n\t        if (win.mockDomain && win.mockDomain.indexOf(_conf.CONSTANTS.MOCK_PROTOCOL) === 0) {\n\t            return win.mockDomain;\n\t        }\n\t\n\t        if (!win.location.protocol) {\n\t            throw new Error('Can not read window protocol');\n\t        }\n\t\n\t        if (win.location.protocol === _conf.CONSTANTS.FILE_PROTOCOL) {\n\t            return win.location.protocol + '//' + win.location.host;\n\t        }\n\t\n\t        if (!win.location.host) {\n\t            throw new Error('Can not read window host');\n\t        }\n\t\n\t        return win.location.protocol + '//' + win.location.host;\n\t    },\n\t    getDomainFromUrl: function getDomainFromUrl(url) {\n\t\n\t        var domain = void 0;\n\t\n\t        if (url.match(/^(https?|mock|file):\\/\\//)) {\n\t            domain = url;\n\t        } else {\n\t            return this.getDomain();\n\t        }\n\t\n\t        domain = domain.split('/').slice(0, 3).join('/');\n\t\n\t        return domain;\n\t    },\n\t    safeGet: function safeGet(obj, prop) {\n\t\n\t        var result = void 0;\n\t\n\t        try {\n\t            result = obj[prop];\n\t        } catch (err) {\n\t            // pass\n\t        }\n\t\n\t        return result;\n\t    }\n\t};\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.log = undefined;\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _util = __webpack_require__(12);\n\t\n\tvar _windows = __webpack_require__(14);\n\t\n\tvar _conf = __webpack_require__(3);\n\t\n\tvar LOG_LEVELS = ['debug', 'info', 'warn', 'error'];\n\t\n\tif (Function.prototype.bind && window.console && _typeof(console.log) === 'object') {\n\t    ['log', 'info', 'warn', 'error'].forEach(function (method) {\n\t        console[method] = this.bind(console[method], console);\n\t    }, Function.prototype.call);\n\t}\n\t\n\tvar log = exports.log = {\n\t    clearLogs: function clearLogs() {\n\t\n\t        if (window.console && window.console.clear) {\n\t            window.console.clear();\n\t        }\n\t\n\t        if (_conf.CONFIG.LOG_TO_PAGE) {\n\t            var container = document.getElementById('postRobotLogs');\n\t\n\t            if (container) {\n\t                container.parentNode.removeChild(container);\n\t            }\n\t        }\n\t    },\n\t    writeToPage: function writeToPage(level, args) {\n\t        setTimeout(function () {\n\t            var container = document.getElementById('postRobotLogs');\n\t\n\t            if (!container) {\n\t                container = document.createElement('div');\n\t                container.id = 'postRobotLogs';\n\t                container.style.cssText = 'width: 800px; font-family: monospace; white-space: pre-wrap;';\n\t                document.body.appendChild(container);\n\t            }\n\t\n\t            var el = document.createElement('div');\n\t\n\t            var date = new Date().toString().split(' ')[4];\n\t\n\t            var payload = _util.util.map(args, function (item) {\n\t                if (typeof item === 'string') {\n\t                    return item;\n\t                }\n\t                if (!item) {\n\t                    return Object.prototype.toString.call(item);\n\t                }\n\t                var json = void 0;\n\t                try {\n\t                    json = (0, _windows.jsonStringify)(item, 0, 2);\n\t                } catch (e) {\n\t                    json = '[object]';\n\t                }\n\t\n\t                return '\\n\\n' + json + '\\n\\n';\n\t            }).join(' ');\n\t\n\t            var msg = date + ' ' + level + ' ' + payload;\n\t            el.innerHTML = msg;\n\t\n\t            var color = {\n\t                log: '#ddd',\n\t                warn: 'orange',\n\t                error: 'red',\n\t                info: 'blue',\n\t                debug: '#aaa'\n\t            }[level];\n\t\n\t            el.style.cssText = 'margin-top: 10px; color: ' + color + ';';\n\t\n\t            if (!container.childNodes.length) {\n\t                container.appendChild(el);\n\t            } else {\n\t                container.insertBefore(el, container.childNodes[0]);\n\t            }\n\t        });\n\t    },\n\t    logLevel: function logLevel(level, args) {\n\t        setTimeout(function () {\n\t            try {\n\t                if (LOG_LEVELS.indexOf(level) < LOG_LEVELS.indexOf(_conf.CONFIG.LOG_LEVEL)) {\n\t                    return;\n\t                }\n\t\n\t                args = Array.prototype.slice.call(args);\n\t\n\t                args.unshift('' + window.location.host + window.location.pathname);\n\t                args.unshift('::');\n\t                args.unshift('' + (0, _windows.getWindowType)().toLowerCase());\n\t                args.unshift('[post-robot]');\n\t\n\t                if (_conf.CONFIG.LOG_TO_PAGE) {\n\t                    log.writeToPage(level, args);\n\t                }\n\t\n\t                if (!window.console) {\n\t                    return;\n\t                }\n\t\n\t                if (!window.console[level]) {\n\t                    level = 'log';\n\t                }\n\t\n\t                if (!window.console[level]) {\n\t                    return;\n\t                }\n\t\n\t                window.console[level].apply(window.console, args);\n\t            } catch (err) {\n\t                // pass\n\t            }\n\t        }, 1);\n\t    },\n\t    debug: function debug() {\n\t        log.logLevel('debug', arguments);\n\t    },\n\t    info: function info() {\n\t        log.logLevel('info', arguments);\n\t    },\n\t    warn: function warn() {\n\t        log.logLevel('warn', arguments);\n\t    },\n\t    error: function error() {\n\t        log.logLevel('error', arguments);\n\t    }\n\t};\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.isSameDomain = isSameDomain;\n\texports.getOpener = getOpener;\n\texports.getParent = getParent;\n\texports.getParents = getParents;\n\texports.isAncestorParent = isAncestorParent;\n\texports.getFrames = getFrames;\n\texports.getAllChildFrames = getAllChildFrames;\n\texports.getAllFramesInWindow = getAllFramesInWindow;\n\texports.getTop = getTop;\n\texports.isWindowClosed = isWindowClosed;\n\texports.getUserAgent = getUserAgent;\n\texports.getFrameByName = getFrameByName;\n\texports.findChildFrameByName = findChildFrameByName;\n\texports.findFrameByName = findFrameByName;\n\texports.isParent = isParent;\n\texports.isOpener = isOpener;\n\texports.getAncestor = getAncestor;\n\texports.getAncestors = getAncestors;\n\texports.isAncestor = isAncestor;\n\texports.isPopup = isPopup;\n\texports.isIframe = isIframe;\n\texports.isFullpage = isFullpage;\n\texports.getWindowType = getWindowType;\n\texports.isSameTopWindow = isSameTopWindow;\n\texports.jsonStringify = jsonStringify;\n\texports.jsonParse = jsonParse;\n\t\n\tvar _util = __webpack_require__(12);\n\t\n\tvar _global = __webpack_require__(15);\n\t\n\tvar _conf = __webpack_require__(3);\n\t\n\t_global.global.domainMatches = _global.global.domainMatches || [];\n\t\n\tvar domainMatchTimeout = void 0;\n\t\n\tfunction isSameDomain(win) {\n\t\n\t    for (var _iterator = _global.global.domainMatches, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n\t        var _ref;\n\t\n\t        if (_isArray) {\n\t            if (_i >= _iterator.length) break;\n\t            _ref = _iterator[_i++];\n\t        } else {\n\t            _i = _iterator.next();\n\t            if (_i.done) break;\n\t            _ref = _i.value;\n\t        }\n\t\n\t        var _match = _ref;\n\t\n\t        if (_match.win === win) {\n\t            return _match.match;\n\t        }\n\t    }\n\t\n\t    var match = void 0;\n\t\n\t    try {\n\t        if (_util.util.getDomain(window) === _util.util.getDomain(win)) {\n\t            match = true;\n\t        } else {\n\t            match = false;\n\t        }\n\t    } catch (err) {\n\t        match = false;\n\t    }\n\t\n\t    _global.global.clean.push(_global.global.domainMatches, { win: win, match: match });\n\t\n\t    if (!domainMatchTimeout) {\n\t        domainMatchTimeout = setTimeout(function () {\n\t            _global.global.domainMatches = [];\n\t            domainMatchTimeout = null;\n\t        }, 1);\n\t    }\n\t\n\t    return match;\n\t}\n\t\n\tfunction getOpener(win) {\n\t\n\t    if (!win) {\n\t        return;\n\t    }\n\t\n\t    try {\n\t        return win.opener;\n\t    } catch (err) {\n\t        return;\n\t    }\n\t}\n\t\n\tfunction getParent(win) {\n\t\n\t    if (!win) {\n\t        return;\n\t    }\n\t\n\t    try {\n\t        if (win.parent && win.parent !== win) {\n\t            return win.parent;\n\t        }\n\t    } catch (err) {\n\t        return;\n\t    }\n\t}\n\t\n\tfunction getParents(win) {\n\t\n\t    var result = [];\n\t\n\t    try {\n\t\n\t        while (win.parent !== win) {\n\t            result.push(win.parent);\n\t            win = win.parent;\n\t        }\n\t    } catch (err) {\n\t        // pass\n\t    }\n\t\n\t    return result;\n\t}\n\t\n\tfunction isAncestorParent(parent, child) {\n\t\n\t    if (!parent || !child) {\n\t        return false;\n\t    }\n\t\n\t    var childParent = getParent(child);\n\t\n\t    if (childParent) {\n\t        return childParent === parent;\n\t    }\n\t\n\t    if (getParents(child).indexOf(parent) !== -1) {\n\t        return true;\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tfunction getFrames(win) {\n\t\n\t    var result = [];\n\t\n\t    var frames = void 0;\n\t\n\t    try {\n\t        frames = win.frames;\n\t    } catch (err) {\n\t        frames = win;\n\t    }\n\t\n\t    var len = void 0;\n\t\n\t    try {\n\t        len = frames.length;\n\t    } catch (err) {\n\t        // pass\n\t    }\n\t\n\t    if (len === 0) {\n\t        return result;\n\t    }\n\t\n\t    if (len) {\n\t        for (var i = 0; i < len; i++) {\n\t\n\t            var frame = void 0;\n\t\n\t            try {\n\t                frame = frames[i];\n\t            } catch (err) {\n\t                continue;\n\t            }\n\t\n\t            result.push(frame);\n\t        }\n\t\n\t        return result;\n\t    }\n\t\n\t    for (var _i2 = 0; _i2 < 100; _i2++) {\n\t        var _frame = void 0;\n\t\n\t        try {\n\t            _frame = frames[_i2];\n\t        } catch (err) {\n\t            return result;\n\t        }\n\t\n\t        if (!_frame) {\n\t            return result;\n\t        }\n\t\n\t        result.push(_frame);\n\t    }\n\t\n\t    return result;\n\t}\n\t\n\tfunction getAllChildFrames(win) {\n\t\n\t    var result = [];\n\t\n\t    for (var _iterator2 = getFrames(win), _isArray2 = Array.isArray(_iterator2), _i3 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n\t        var _ref2;\n\t\n\t        if (_isArray2) {\n\t            if (_i3 >= _iterator2.length) break;\n\t            _ref2 = _iterator2[_i3++];\n\t        } else {\n\t            _i3 = _iterator2.next();\n\t            if (_i3.done) break;\n\t            _ref2 = _i3.value;\n\t        }\n\t\n\t        var frame = _ref2;\n\t\n\t        result.push(frame);\n\t\n\t        for (var _iterator3 = getAllChildFrames(frame), _isArray3 = Array.isArray(_iterator3), _i4 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n\t            var _ref3;\n\t\n\t            if (_isArray3) {\n\t                if (_i4 >= _iterator3.length) break;\n\t                _ref3 = _iterator3[_i4++];\n\t            } else {\n\t                _i4 = _iterator3.next();\n\t                if (_i4.done) break;\n\t                _ref3 = _i4.value;\n\t            }\n\t\n\t            var childFrame = _ref3;\n\t\n\t            result.push(childFrame);\n\t        }\n\t    }\n\t\n\t    return result;\n\t}\n\t\n\tfunction getAllFramesInWindow(win) {\n\t\n\t    var result = getAllChildFrames(win);\n\t\n\t    result.push(win);\n\t\n\t    for (var _iterator4 = getParents(win), _isArray4 = Array.isArray(_iterator4), _i5 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {\n\t        var _ref4;\n\t\n\t        if (_isArray4) {\n\t            if (_i5 >= _iterator4.length) break;\n\t            _ref4 = _iterator4[_i5++];\n\t        } else {\n\t            _i5 = _iterator4.next();\n\t            if (_i5.done) break;\n\t            _ref4 = _i5.value;\n\t        }\n\t\n\t        var parent = _ref4;\n\t\n\t\n\t        result.push(parent);\n\t\n\t        for (var _iterator5 = getFrames(parent), _isArray5 = Array.isArray(_iterator5), _i6 = 0, _iterator5 = _isArray5 ? _iterator5 : _iterator5[Symbol.iterator]();;) {\n\t            var _ref5;\n\t\n\t            if (_isArray5) {\n\t                if (_i6 >= _iterator5.length) break;\n\t                _ref5 = _iterator5[_i6++];\n\t            } else {\n\t                _i6 = _iterator5.next();\n\t                if (_i6.done) break;\n\t                _ref5 = _i6.value;\n\t            }\n\t\n\t            var frame = _ref5;\n\t\n\t\n\t            if (result.indexOf(frame) === -1) {\n\t                result.push(frame);\n\t            }\n\t        }\n\t    }\n\t\n\t    return result;\n\t}\n\t\n\tfunction getTop(win) {\n\t\n\t    if (!win) {\n\t        return;\n\t    }\n\t\n\t    try {\n\t        if (win.top) {\n\t            return win.top;\n\t        }\n\t    } catch (err) {\n\t        // pass\n\t    }\n\t\n\t    if (getParent(win) === win) {\n\t        return win;\n\t    }\n\t\n\t    try {\n\t        if (isAncestorParent(window, win)) {\n\t            return window.top;\n\t        }\n\t    } catch (err) {\n\t        // pass\n\t    }\n\t\n\t    try {\n\t        if (isAncestorParent(win, window)) {\n\t            return window.top;\n\t        }\n\t    } catch (err) {\n\t        // pass\n\t    }\n\t\n\t    for (var _iterator6 = getAllChildFrames(win), _isArray6 = Array.isArray(_iterator6), _i7 = 0, _iterator6 = _isArray6 ? _iterator6 : _iterator6[Symbol.iterator]();;) {\n\t        var _ref6;\n\t\n\t        if (_isArray6) {\n\t            if (_i7 >= _iterator6.length) break;\n\t            _ref6 = _iterator6[_i7++];\n\t        } else {\n\t            _i7 = _iterator6.next();\n\t            if (_i7.done) break;\n\t            _ref6 = _i7.value;\n\t        }\n\t\n\t        var frame = _ref6;\n\t\n\t        try {\n\t            if (frame.top) {\n\t                return frame.top;\n\t            }\n\t        } catch (err) {\n\t            // pass\n\t        }\n\t\n\t        if (getParent(frame) === frame) {\n\t            return frame;\n\t        }\n\t    }\n\t}\n\t\n\tfunction isWindowClosed(win) {\n\t    var allowMock = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\t\n\t\n\t    try {\n\t        if (win === window) {\n\t            return false;\n\t        }\n\t    } catch (err) {\n\t        return true;\n\t    }\n\t\n\t    try {\n\t        if (!win) {\n\t            return true;\n\t        }\n\t    } catch (err) {\n\t        return true;\n\t    }\n\t\n\t    try {\n\t        if (win.closed) {\n\t            return true;\n\t        }\n\t    } catch (err) {\n\t\n\t        // I love you so much IE\n\t\n\t        if (err && err.message === 'Call was rejected by callee.\\r\\n') {\n\t            return false;\n\t        }\n\t\n\t        return true;\n\t    }\n\t\n\t    if (allowMock && isSameDomain(win) && _util.util.safeGet(win, 'mockclosed')) {\n\t        return true;\n\t    }\n\t\n\t    /*\n\t     // IE9... don't even ask. If an iframe is removed from the parent page, .closed does not get set to true\n\t     try {\n\t        if (win.parent === win && !getOpener(win) && win !== getTop(window)) {\n\t            // return true;\n\t        }\n\t    } catch (err) {\n\t        // pass\n\t    }\n\t     */\n\t\n\t    return false;\n\t}\n\t\n\tfunction getUserAgent(win) {\n\t    win = win || window;\n\t    return win.navigator.mockUserAgent || win.navigator.userAgent;\n\t}\n\t\n\tfunction getFrameByName(win, name) {\n\t\n\t    var winFrames = getFrames(win);\n\t\n\t    for (var _iterator7 = winFrames, _isArray7 = Array.isArray(_iterator7), _i8 = 0, _iterator7 = _isArray7 ? _iterator7 : _iterator7[Symbol.iterator]();;) {\n\t        var _ref7;\n\t\n\t        if (_isArray7) {\n\t            if (_i8 >= _iterator7.length) break;\n\t            _ref7 = _iterator7[_i8++];\n\t        } else {\n\t            _i8 = _iterator7.next();\n\t            if (_i8.done) break;\n\t            _ref7 = _i8.value;\n\t        }\n\t\n\t        var childFrame = _ref7;\n\t\n\t        try {\n\t            if (isSameDomain(childFrame) && childFrame.name === name && winFrames.indexOf(childFrame) !== -1) {\n\t                return childFrame;\n\t            }\n\t        } catch (err) {\n\t            // pass\n\t        }\n\t    }\n\t\n\t    try {\n\t        if (winFrames.indexOf(win.frames[name]) !== -1) {\n\t            return win.frames[name];\n\t        }\n\t    } catch (err) {\n\t        // pass\n\t    }\n\t\n\t    try {\n\t        if (winFrames.indexOf(win[name]) !== -1) {\n\t            return win[name];\n\t        }\n\t    } catch (err) {\n\t        // pass\n\t    }\n\t}\n\t\n\tfunction findChildFrameByName(win, name) {\n\t\n\t    var frame = getFrameByName(win, name);\n\t\n\t    if (frame) {\n\t        return frame;\n\t    }\n\t\n\t    for (var _iterator8 = getFrames(win), _isArray8 = Array.isArray(_iterator8), _i9 = 0, _iterator8 = _isArray8 ? _iterator8 : _iterator8[Symbol.iterator]();;) {\n\t        var _ref8;\n\t\n\t        if (_isArray8) {\n\t            if (_i9 >= _iterator8.length) break;\n\t            _ref8 = _iterator8[_i9++];\n\t        } else {\n\t            _i9 = _iterator8.next();\n\t            if (_i9.done) break;\n\t            _ref8 = _i9.value;\n\t        }\n\t\n\t        var childFrame = _ref8;\n\t\n\t        var namedFrame = findChildFrameByName(childFrame, name);\n\t\n\t        if (namedFrame) {\n\t            return namedFrame;\n\t        }\n\t    }\n\t}\n\t\n\tfunction findFrameByName(win, name) {\n\t\n\t    var frame = void 0;\n\t\n\t    frame = getFrameByName(win, name);\n\t\n\t    if (frame) {\n\t        return frame;\n\t    }\n\t\n\t    return findChildFrameByName(getTop(win), name);\n\t}\n\t\n\tfunction isParent(win, frame) {\n\t\n\t    var frameParent = getParent(frame);\n\t\n\t    if (frameParent) {\n\t        return frameParent === win;\n\t    }\n\t\n\t    for (var _iterator9 = getFrames(win), _isArray9 = Array.isArray(_iterator9), _i10 = 0, _iterator9 = _isArray9 ? _iterator9 : _iterator9[Symbol.iterator]();;) {\n\t        var _ref9;\n\t\n\t        if (_isArray9) {\n\t            if (_i10 >= _iterator9.length) break;\n\t            _ref9 = _iterator9[_i10++];\n\t        } else {\n\t            _i10 = _iterator9.next();\n\t            if (_i10.done) break;\n\t            _ref9 = _i10.value;\n\t        }\n\t\n\t        var childFrame = _ref9;\n\t\n\t        if (childFrame === frame) {\n\t            return true;\n\t        }\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tfunction isOpener(parent, child) {\n\t\n\t    return parent === getOpener(child);\n\t}\n\t\n\tfunction getAncestor(win) {\n\t    win = win || window;\n\t\n\t    var opener = getOpener(win);\n\t\n\t    if (opener) {\n\t        return opener;\n\t    }\n\t\n\t    var parent = getParent(win);\n\t\n\t    if (parent) {\n\t        return parent;\n\t    }\n\t}\n\t\n\tfunction getAncestors(win) {\n\t\n\t    var results = [];\n\t\n\t    var ancestor = win;\n\t\n\t    while (ancestor) {\n\t        ancestor = getAncestor(ancestor);\n\t        if (ancestor) {\n\t            results.push(ancestor);\n\t        }\n\t    }\n\t\n\t    return results;\n\t}\n\t\n\tfunction isAncestor(parent, child) {\n\t\n\t    var actualParent = getAncestor(child);\n\t\n\t    if (actualParent) {\n\t        if (actualParent === parent) {\n\t            return true;\n\t        }\n\t\n\t        return false;\n\t    }\n\t\n\t    if (child === parent) {\n\t        return false;\n\t    }\n\t\n\t    if (getTop(child) === child) {\n\t        return false;\n\t    }\n\t\n\t    for (var _iterator10 = getFrames(parent), _isArray10 = Array.isArray(_iterator10), _i11 = 0, _iterator10 = _isArray10 ? _iterator10 : _iterator10[Symbol.iterator]();;) {\n\t        var _ref10;\n\t\n\t        if (_isArray10) {\n\t            if (_i11 >= _iterator10.length) break;\n\t            _ref10 = _iterator10[_i11++];\n\t        } else {\n\t            _i11 = _iterator10.next();\n\t            if (_i11.done) break;\n\t            _ref10 = _i11.value;\n\t        }\n\t\n\t        var frame = _ref10;\n\t\n\t        if (frame === child) {\n\t            return true;\n\t        }\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tfunction isPopup() {\n\t    return Boolean(getOpener(window));\n\t}\n\t\n\tfunction isIframe() {\n\t    return Boolean(getParent(window));\n\t}\n\t\n\tfunction isFullpage() {\n\t    return Boolean(!isIframe() && !isPopup());\n\t}\n\t\n\tfunction getWindowType() {\n\t    if (isPopup()) {\n\t        return _conf.CONSTANTS.WINDOW_TYPES.POPUP;\n\t    }\n\t    if (isIframe()) {\n\t        return _conf.CONSTANTS.WINDOW_TYPES.IFRAME;\n\t    }\n\t    return _conf.CONSTANTS.WINDOW_TYPES.FULLPAGE;\n\t}\n\t\n\tfunction anyMatch(collection1, collection2) {\n\t\n\t    for (var _iterator11 = collection1, _isArray11 = Array.isArray(_iterator11), _i12 = 0, _iterator11 = _isArray11 ? _iterator11 : _iterator11[Symbol.iterator]();;) {\n\t        var _ref11;\n\t\n\t        if (_isArray11) {\n\t            if (_i12 >= _iterator11.length) break;\n\t            _ref11 = _iterator11[_i12++];\n\t        } else {\n\t            _i12 = _iterator11.next();\n\t            if (_i12.done) break;\n\t            _ref11 = _i12.value;\n\t        }\n\t\n\t        var item1 = _ref11;\n\t\n\t        for (var _iterator12 = collection2, _isArray12 = Array.isArray(_iterator12), _i13 = 0, _iterator12 = _isArray12 ? _iterator12 : _iterator12[Symbol.iterator]();;) {\n\t            var _ref12;\n\t\n\t            if (_isArray12) {\n\t                if (_i13 >= _iterator12.length) break;\n\t                _ref12 = _iterator12[_i13++];\n\t            } else {\n\t                _i13 = _iterator12.next();\n\t                if (_i13.done) break;\n\t                _ref12 = _i13.value;\n\t            }\n\t\n\t            var item2 = _ref12;\n\t\n\t            if (item1 === item2) {\n\t                return true;\n\t            }\n\t        }\n\t    }\n\t}\n\t\n\tfunction isSameTopWindow(win1, win2) {\n\t\n\t    var top1 = getTop(win1);\n\t    var top2 = getTop(win2);\n\t\n\t    try {\n\t        if (top1 && top2) {\n\t            if (top1 === top2) {\n\t                return true;\n\t            }\n\t\n\t            return false;\n\t        }\n\t    } catch (err) {\n\t        // pass\n\t    }\n\t\n\t    var allFrames1 = getAllFramesInWindow(win1);\n\t    var allFrames2 = getAllFramesInWindow(win2);\n\t\n\t    if (anyMatch(allFrames1, allFrames2)) {\n\t        return true;\n\t    }\n\t\n\t    var opener1 = getOpener(top1);\n\t    var opener2 = getOpener(top2);\n\t\n\t    if (opener1 && anyMatch(getAllFramesInWindow(opener1), allFrames2)) {\n\t        return false;\n\t    }\n\t\n\t    if (opener2 && anyMatch(getAllFramesInWindow(opener2), allFrames1)) {\n\t        return false;\n\t    }\n\t}\n\t\n\tfunction jsonStringify() {\n\t\n\t    var objectToJSON = void 0;\n\t    var arrayToJSON = void 0;\n\t\n\t    try {\n\t        if (JSON.stringify({}) !== '{}') {\n\t            objectToJSON = Object.prototype.toJSON;\n\t            delete Object.prototype.toJSON;\n\t        }\n\t\n\t        if (JSON.stringify({}) !== '{}') {\n\t            throw new Error('Can not correctly serialize JSON objects');\n\t        }\n\t\n\t        if (JSON.stringify([]) !== '[]') {\n\t            arrayToJSON = Array.prototype.toJSON;\n\t            delete Array.prototype.toJSON;\n\t        }\n\t\n\t        if (JSON.stringify([]) !== '[]') {\n\t            throw new Error('Can not correctly serialize JSON objects');\n\t        }\n\t    } catch (err) {\n\t        throw new Error('Can not repair JSON.stringify: ' + err.message);\n\t    }\n\t\n\t    var result = JSON.stringify.apply(this, arguments);\n\t\n\t    try {\n\t        if (objectToJSON) {\n\t            Object.prototype.toJSON = objectToJSON; // eslint-disable-line\n\t        }\n\t\n\t        if (arrayToJSON) {\n\t            Array.prototype.toJSON = arrayToJSON; // eslint-disable-line\n\t        }\n\t    } catch (err) {\n\t        throw new Error('Can not repair JSON.stringify: ' + err.message);\n\t    }\n\t\n\t    return result;\n\t}\n\t\n\tfunction jsonParse() {\n\t    return JSON.parse.apply(this, arguments);\n\t}\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.global = undefined;\n\t\n\tvar _conf = __webpack_require__(3);\n\t\n\tvar _cleanup = __webpack_require__(16);\n\t\n\tvar global = exports.global = window[_conf.CONSTANTS.WINDOW_PROPS.POSTROBOT] = window[_conf.CONSTANTS.WINDOW_PROPS.POSTROBOT] || {};\n\t\n\tglobal.clean = global.clean || (0, _cleanup.cleanup)(global);\n\t\n\t// Backwards compatibility\n\t\n\tglobal.registerSelf = function () {\n\t    // pass\n\t};\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.cleanup = cleanup;\n\t\n\tvar _promise = __webpack_require__(10);\n\t\n\tfunction cleanup(obj) {\n\t\n\t    var tasks = [];\n\t\n\t    return {\n\t\n\t        getters: {\n\t            array: function array() {\n\t                return [];\n\t            },\n\t            object: function object() {\n\t                return {};\n\t            }\n\t        },\n\t\n\t        set: function set(name, item) {\n\t            obj[name] = item;\n\t            this.register(function () {\n\t                delete obj[name];\n\t            });\n\t            return item;\n\t        },\n\t        push: function push(collection, item) {\n\t            collection.push(item);\n\t            this.register(function () {\n\t                var index = collection.indexOf(item);\n\t                if (index !== -1) {\n\t                    collection.splice(index, 1);\n\t                }\n\t            });\n\t            return item;\n\t        },\n\t        setItem: function setItem(mapping, key, item) {\n\t            mapping[key] = item;\n\t            this.register(function () {\n\t                delete mapping[key];\n\t            });\n\t            return item;\n\t        },\n\t        register: function register(name, method) {\n\t\n\t            if (!method) {\n\t                method = name;\n\t                name = undefined;\n\t            }\n\t\n\t            tasks.push({\n\t                complete: false,\n\t\n\t                name: name,\n\t\n\t                run: function run() {\n\t\n\t                    if (this.complete) {\n\t                        return;\n\t                    }\n\t\n\t                    this.complete = true;\n\t\n\t                    return method();\n\t                }\n\t            });\n\t        },\n\t        hasTasks: function hasTasks() {\n\t            return Boolean(tasks.filter(function (item) {\n\t                return !item.complete;\n\t            }).length);\n\t        },\n\t        all: function all() {\n\t            var results = [];\n\t\n\t            while (tasks.length) {\n\t                results.push(tasks.pop().run());\n\t            }\n\t\n\t            return _promise.SyncPromise.all(results).then(function () {\n\t                return;\n\t            });\n\t        },\n\t        run: function run(name) {\n\t            var results = [];\n\t            var toClean = [];\n\t\n\t            for (var _iterator = tasks, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n\t                var _ref;\n\t\n\t                if (_isArray) {\n\t                    if (_i >= _iterator.length) break;\n\t                    _ref = _iterator[_i++];\n\t                } else {\n\t                    _i = _iterator.next();\n\t                    if (_i.done) break;\n\t                    _ref = _i.value;\n\t                }\n\t\n\t                var item = _ref;\n\t\n\t                if (item.name === name) {\n\t                    toClean.push(item);\n\t                    results.push(item.run());\n\t                }\n\t            }\n\t\n\t            for (var _iterator2 = toClean, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n\t                var _ref2;\n\t\n\t                if (_isArray2) {\n\t                    if (_i2 >= _iterator2.length) break;\n\t                    _ref2 = _iterator2[_i2++];\n\t                } else {\n\t                    _i2 = _iterator2.next();\n\t                    if (_i2.done) break;\n\t                    _ref2 = _i2.value;\n\t                }\n\t\n\t                var _item = _ref2;\n\t\n\t                tasks.splice(tasks.indexOf(_item), 1);\n\t            }\n\t\n\t            return _promise.SyncPromise.all(results).then(function () {\n\t                return;\n\t            });\n\t        }\n\t    };\n\t}\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.listenForMethods = undefined;\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\texports.serializeMethod = serializeMethod;\n\texports.serializeMethods = serializeMethods;\n\texports.deserializeMethod = deserializeMethod;\n\texports.deserializeError = deserializeError;\n\texports.deserializeMethods = deserializeMethods;\n\t\n\tvar _conf = __webpack_require__(3);\n\t\n\tvar _util = __webpack_require__(12);\n\t\n\tvar _interface = __webpack_require__(1);\n\t\n\tvar _log = __webpack_require__(13);\n\t\n\tvar _promise = __webpack_require__(9);\n\t\n\tvar _global = __webpack_require__(15);\n\t\n\t_global.global.methods = _global.global.methods || {};\n\t\n\tvar listenForMethods = exports.listenForMethods = _util.util.once(function () {\n\t    (0, _interface.on)(_conf.CONSTANTS.POST_MESSAGE_NAMES.METHOD, { window: '*', origin: '*' }, function (_ref) {\n\t        var source = _ref.source,\n\t            origin = _ref.origin,\n\t            data = _ref.data;\n\t\n\t\n\t        var meth = _global.global.methods[data.id];\n\t\n\t        if (!meth) {\n\t            throw new Error('Could not find method with id: ' + data.id);\n\t        }\n\t\n\t        if (meth.destination !== source) {\n\t            throw new Error('Method window does not match');\n\t        }\n\t\n\t        if (meth.domain && meth.domain !== '*' && origin !== meth.domain) {\n\t            throw new Error('Method domain ' + meth.domain + ' does not match origin ' + origin);\n\t        }\n\t\n\t        _log.log.debug('Call local method', data.name, data.args);\n\t\n\t        return _promise.promise.run(function () {\n\t            return meth.method.apply({ source: source, origin: origin, data: data }, data.args);\n\t        }).then(function (result) {\n\t\n\t            return {\n\t                result: result,\n\t                id: data.id,\n\t                name: data.name\n\t            };\n\t        });\n\t    });\n\t});\n\t\n\tfunction isSerialized(item, type) {\n\t    return (typeof item === 'undefined' ? 'undefined' : _typeof(item)) === 'object' && item !== null && item.__type__ === type;\n\t}\n\t\n\tfunction serializeMethod(destination, domain, method, name) {\n\t\n\t    var id = _util.util.uniqueID();\n\t\n\t    _global.global.clean.setItem(_global.global.methods, id, { destination: destination, domain: domain, method: method });\n\t\n\t    return {\n\t        __type__: _conf.CONSTANTS.SERIALIZATION_TYPES.METHOD,\n\t        __id__: id,\n\t        __name__: name\n\t    };\n\t}\n\t\n\tfunction serializeError(err) {\n\t    return {\n\t        __type__: _conf.CONSTANTS.SERIALIZATION_TYPES.ERROR,\n\t        __message__: err.stack || err.message || err.toString()\n\t    };\n\t}\n\t\n\tfunction serializeMethods(destination, domain, obj) {\n\t\n\t    return _util.util.replaceObject({ obj: obj }, function (item, key) {\n\t        if (typeof item === 'function') {\n\t            return serializeMethod(destination, domain, item, key);\n\t        }\n\t\n\t        if (item instanceof Error) {\n\t            return serializeError(item);\n\t        }\n\t    }).obj;\n\t}\n\t\n\tfunction deserializeMethod(source, origin, obj) {\n\t\n\t    function wrapper() {\n\t        var args = Array.prototype.slice.call(arguments);\n\t        _log.log.debug('Call foreign method', obj.__name__, args);\n\t        return (0, _interface.send)(source, _conf.CONSTANTS.POST_MESSAGE_NAMES.METHOD, {\n\t            id: obj.__id__,\n\t            name: obj.__name__,\n\t            args: args\n\t\n\t        }, { domain: origin }).then(function (_ref2) {\n\t            var data = _ref2.data;\n\t\n\t\n\t            _log.log.debug('Got foreign method result', obj.__name__, data.result);\n\t            return data.result;\n\t        }, function (err) {\n\t            _log.log.debug('Got foreign method error', err.stack || err.toString());\n\t            throw err;\n\t        });\n\t    }\n\t\n\t    wrapper.__name__ = obj.__name__;\n\t    wrapper.source = source;\n\t    wrapper.origin = origin;\n\t\n\t    return wrapper;\n\t}\n\t\n\tfunction deserializeError(source, origin, obj) {\n\t    return new Error(obj.__message__);\n\t}\n\t\n\tfunction deserializeMethods(source, origin, obj) {\n\t\n\t    return _util.util.replaceObject({ obj: obj }, function (item, key) {\n\t\n\t        if (isSerialized(item, _conf.CONSTANTS.SERIALIZATION_TYPES.METHOD)) {\n\t            return deserializeMethod(source, origin, item);\n\t        }\n\t\n\t        if (isSerialized(item, _conf.CONSTANTS.SERIALIZATION_TYPES.ERROR)) {\n\t            return deserializeError(source, origin, item);\n\t        }\n\t    }).obj;\n\t}\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.initOnReady = initOnReady;\n\texports.onWindowReady = onWindowReady;\n\t\n\tvar _conf = __webpack_require__(3);\n\t\n\tvar _windows = __webpack_require__(14);\n\t\n\tvar _interface = __webpack_require__(1);\n\t\n\tvar _log = __webpack_require__(13);\n\t\n\tvar _promise = __webpack_require__(10);\n\t\n\tvar _global = __webpack_require__(15);\n\t\n\t_global.global.readyPromises = _global.global.readyPromises || [];\n\t\n\tfunction initOnReady() {\n\t\n\t    (0, _interface.on)(_conf.CONSTANTS.POST_MESSAGE_NAMES.READY, { window: '*', domain: '*' }, function (event) {\n\t\n\t        for (var _iterator = _global.global.readyPromises, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n\t            var _ref;\n\t\n\t            if (_isArray) {\n\t                if (_i >= _iterator.length) break;\n\t                _ref = _iterator[_i++];\n\t            } else {\n\t                _i = _iterator.next();\n\t                if (_i.done) break;\n\t                _ref = _i.value;\n\t            }\n\t\n\t            var item = _ref;\n\t\n\t            if (item.win === event.source) {\n\t                item.promise.resolve(event);\n\t                return;\n\t            }\n\t        }\n\t\n\t        _global.global.clean.push(_global.global.readyPromises, {\n\t            win: event.source,\n\t            promise: new _promise.SyncPromise().resolve(event)\n\t        });\n\t    });\n\t\n\t    var parent = (0, _windows.getAncestor)();\n\t\n\t    if (parent) {\n\t        (0, _interface.send)(parent, _conf.CONSTANTS.POST_MESSAGE_NAMES.READY, {}, { domain: '*' })['catch'](function (err) {\n\t            _log.log.debug(err.stack || err.toString());\n\t        });\n\t    }\n\t}\n\t\n\tfunction onWindowReady(win) {\n\t    var timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5000;\n\t    var name = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'Window';\n\t\n\t\n\t    for (var _iterator2 = _global.global.readyPromises, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n\t        var _ref2;\n\t\n\t        if (_isArray2) {\n\t            if (_i2 >= _iterator2.length) break;\n\t            _ref2 = _iterator2[_i2++];\n\t        } else {\n\t            _i2 = _iterator2.next();\n\t            if (_i2.done) break;\n\t            _ref2 = _i2.value;\n\t        }\n\t\n\t        var item = _ref2;\n\t\n\t        if (item.win === win) {\n\t            return item.promise;\n\t        }\n\t    }\n\t\n\t    var promise = new _promise.SyncPromise();\n\t\n\t    _global.global.clean.push(_global.global.readyPromises, { win: win, promise: promise });\n\t\n\t    setTimeout(function () {\n\t        return promise.reject(new Error(name + ' did not load after ' + timeout + 'ms'));\n\t    }, timeout);\n\t\n\t    return promise;\n\t}\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _ie = __webpack_require__(20);\n\t\n\tObject.keys(_ie).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _ie[key];\n\t    }\n\t  });\n\t});\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.emulateIERestrictions = emulateIERestrictions;\n\t\n\tvar _conf = __webpack_require__(3);\n\t\n\tvar _lib = __webpack_require__(8);\n\t\n\tfunction emulateIERestrictions(sourceWindow, targetWindow) {\n\t    if (!_conf.CONFIG.ALLOW_POSTMESSAGE_POPUP) {\n\t\n\t        if ((0, _lib.isSameTopWindow)(sourceWindow, targetWindow) === false) {\n\t            throw new Error('Can not send and receive post messages between two different windows (disabled to emulate IE)');\n\t        }\n\t    }\n\t}\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.RECEIVE_MESSAGE_TYPES = undefined;\n\t\n\tvar _RECEIVE_MESSAGE_TYPE;\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _conf = __webpack_require__(3);\n\t\n\tvar _lib = __webpack_require__(8);\n\t\n\tvar _send = __webpack_require__(22);\n\t\n\tvar _listeners = __webpack_require__(29);\n\t\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\tfunction matchDomain(domain, origin) {\n\t\n\t    if (typeof domain === 'string') {\n\t        return domain === '*' || origin === domain;\n\t    }\n\t\n\t    if (Object.prototype.toString.call(domain) === '[object RegExp]') {\n\t        return origin.match(domain);\n\t    }\n\t\n\t    if (Array.isArray(domain)) {\n\t        return domain.indexOf(origin) !== -1;\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tvar RECEIVE_MESSAGE_TYPES = exports.RECEIVE_MESSAGE_TYPES = (_RECEIVE_MESSAGE_TYPE = {}, _defineProperty(_RECEIVE_MESSAGE_TYPE, _conf.CONSTANTS.POST_MESSAGE_TYPE.ACK, function (source, origin, message) {\n\t\n\t    var options = _listeners.listeners.response[message.hash];\n\t\n\t    if (!options) {\n\t        throw new Error('No handler found for post message ack for message: ' + message.name + ' from ' + origin + ' in ' + window.location.protocol + '//' + window.location.host + window.location.pathname);\n\t    }\n\t\n\t    if (!matchDomain(options.domain, origin)) {\n\t        throw new Error('Ack origin ' + origin + ' does not match domain ' + options.domain);\n\t    }\n\t\n\t    options.ack = true;\n\t}), _defineProperty(_RECEIVE_MESSAGE_TYPE, _conf.CONSTANTS.POST_MESSAGE_TYPE.REQUEST, function (source, origin, message) {\n\t\n\t    var options = (0, _listeners.getRequestListener)(message.name, source, origin);\n\t\n\t    function respond(data) {\n\t\n\t        if (message.fireAndForget || (0, _lib.isWindowClosed)(source)) {\n\t            return _lib.promise.Promise.resolve();\n\t        }\n\t\n\t        return (0, _send.sendMessage)(source, _extends({\n\t            target: message.originalSource,\n\t            hash: message.hash,\n\t            name: message.name\n\t        }, data), origin);\n\t    }\n\t\n\t    return _lib.promise.Promise.all([respond({\n\t        type: _conf.CONSTANTS.POST_MESSAGE_TYPE.ACK\n\t    }), _lib.promise.run(function () {\n\t\n\t        if (!options) {\n\t            throw new Error('No handler found for post message: ' + message.name + ' from ' + origin + ' in ' + window.location.protocol + '//' + window.location.host + window.location.pathname);\n\t        }\n\t\n\t        if (!matchDomain(options.domain, origin)) {\n\t            throw new Error('Request origin ' + origin + ' does not match domain ' + options.domain);\n\t        }\n\t\n\t        var data = message.data;\n\t\n\t        return _lib.promise.deNodeify(options.handler, { source: source, origin: origin, data: data });\n\t    }).then(function (data) {\n\t\n\t        return respond({\n\t            type: _conf.CONSTANTS.POST_MESSAGE_TYPE.RESPONSE,\n\t            ack: _conf.CONSTANTS.POST_MESSAGE_ACK.SUCCESS,\n\t            data: data\n\t        });\n\t    }, function (err) {\n\t\n\t        return respond({\n\t            type: _conf.CONSTANTS.POST_MESSAGE_TYPE.RESPONSE,\n\t            ack: _conf.CONSTANTS.POST_MESSAGE_ACK.ERROR,\n\t            error: err.stack ? err.message + '\\n' + err.stack : err.toString()\n\t        });\n\t    })])['catch'](function (err) {\n\t\n\t        if (options && options.handleError) {\n\t            return options.handleError(err);\n\t        } else {\n\t            _lib.log.error(err.stack || err.toString());\n\t        }\n\t    });\n\t}), _defineProperty(_RECEIVE_MESSAGE_TYPE, _conf.CONSTANTS.POST_MESSAGE_TYPE.RESPONSE, function (source, origin, message) {\n\t\n\t    var options = _listeners.listeners.response[message.hash];\n\t\n\t    if (!options) {\n\t        throw new Error('No handler found for post message response for message: ' + message.name + ' from ' + origin + ' in ' + window.location.protocol + '//' + window.location.host + window.location.pathname);\n\t    }\n\t\n\t    if (!matchDomain(options.domain, origin)) {\n\t        throw new Error('Response origin ' + origin + ' does not match domain ' + options.domain);\n\t    }\n\t\n\t    delete _listeners.listeners.response[message.hash];\n\t\n\t    if (message.ack === _conf.CONSTANTS.POST_MESSAGE_ACK.ERROR) {\n\t        return options.respond(new Error(message.error));\n\t    } else if (message.ack === _conf.CONSTANTS.POST_MESSAGE_ACK.SUCCESS) {\n\t        var data = message.data || message.response;\n\t\n\t        return options.respond(null, { source: source, origin: origin, data: data });\n\t    }\n\t}), _RECEIVE_MESSAGE_TYPE);\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.buildMessage = buildMessage;\n\texports.sendMessage = sendMessage;\n\t\n\tvar _conf = __webpack_require__(3);\n\t\n\tvar _lib = __webpack_require__(8);\n\t\n\tvar _strategies = __webpack_require__(23);\n\t\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\tfunction buildMessage(win, message) {\n\t    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t\n\t    var id = _lib.util.uniqueID();\n\t    var type = (0, _lib.getWindowType)();\n\t    var sourceDomain = _lib.util.getDomain(window);\n\t\n\t    return _extends({}, message, options, {\n\t        sourceDomain: sourceDomain,\n\t        id: message.id || id,\n\t        windowType: type\n\t    });\n\t}\n\t\n\tfunction sendMessage(win, message, domain) {\n\t    return _lib.promise.run(function () {\n\t\n\t        message = buildMessage(win, message, {\n\t            data: (0, _lib.serializeMethods)(win, domain, message.data),\n\t            domain: domain\n\t        });\n\t\n\t        var level = void 0;\n\t\n\t        if (_conf.POST_MESSAGE_NAMES_LIST.indexOf(message.name) !== -1 || message.type === _conf.CONSTANTS.POST_MESSAGE_TYPE.ACK) {\n\t            level = 'debug';\n\t        } else if (message.ack === 'error') {\n\t            level = 'error';\n\t        } else {\n\t            level = 'info';\n\t        }\n\t\n\t        _lib.log.logLevel(level, ['\\n\\n\\t', '#send', message.type.replace(/^postrobot_message_/, ''), '::', message.name, '::', domain || '*', '\\n\\n', message]);\n\t\n\t        if (_conf.CONFIG.MOCK_MODE) {\n\t            delete message.target;\n\t            return window[_conf.CONSTANTS.WINDOW_PROPS.POSTROBOT].postMessage({\n\t                origin: _lib.util.getDomain(window),\n\t                source: window,\n\t                data: (0, _lib.jsonStringify)(message, 0, 2)\n\t            });\n\t        }\n\t\n\t        if (win === window) {\n\t            throw new Error('Attemping to send message to self');\n\t        }\n\t\n\t        if ((0, _lib.isWindowClosed)(win)) {\n\t            throw new Error('Window is closed');\n\t        }\n\t\n\t        _lib.log.debug('Running send message strategies', message);\n\t\n\t        var messages = [];\n\t\n\t        var serializedMessage = (0, _lib.jsonStringify)(_defineProperty({}, _conf.CONSTANTS.WINDOW_PROPS.POSTROBOT, message), 0, 2);\n\t\n\t        return _lib.promise.map(Object.keys(_strategies.SEND_MESSAGE_STRATEGIES), function (strategyName) {\n\t\n\t            return _lib.promise.run(function () {\n\t\n\t                if (!_conf.CONFIG.ALLOWED_POST_MESSAGE_METHODS[strategyName]) {\n\t                    throw new Error('Strategy disallowed: ' + strategyName);\n\t                }\n\t\n\t                return _strategies.SEND_MESSAGE_STRATEGIES[strategyName](win, serializedMessage, domain);\n\t            }).then(function () {\n\t                messages.push(strategyName + ': success');\n\t                return true;\n\t            }, function (err) {\n\t                messages.push(strategyName + ': ' + (err.stack || err.toString()) + '\\n');\n\t                return false;\n\t            });\n\t        }).then(function (results) {\n\t\n\t            var success = _lib.util.some(results);\n\t            var status = message.type + ' ' + message.name + ' ' + (success ? 'success' : 'error') + ':\\n  - ' + messages.join('\\n  - ') + '\\n';\n\t\n\t            _lib.log.debug(status);\n\t\n\t            if (!success) {\n\t                throw new Error(status);\n\t            }\n\t        });\n\t    });\n\t}\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.SEND_MESSAGE_STRATEGIES = undefined;\n\t\n\tvar _SEND_MESSAGE_STRATEG;\n\t\n\tvar _conf = __webpack_require__(3);\n\t\n\tvar _lib = __webpack_require__(8);\n\t\n\tvar _compat = __webpack_require__(19);\n\t\n\tvar _bridge = __webpack_require__(24);\n\t\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\tvar SEND_MESSAGE_STRATEGIES = exports.SEND_MESSAGE_STRATEGIES = (_SEND_MESSAGE_STRATEG = {}, _defineProperty(_SEND_MESSAGE_STRATEG, _conf.CONSTANTS.SEND_STRATEGIES.POST_MESSAGE, function (win, serializedMessage, domain) {\n\t\n\t    (0, _compat.emulateIERestrictions)(window, win);\n\t\n\t    if (domain && domain.indexOf(_conf.CONSTANTS.MOCK_PROTOCOL) === 0) {\n\t        domain = win.location.protocol + '//' + win.location.host;\n\t    }\n\t\n\t    if (domain && domain.indexOf(_conf.CONSTANTS.FILE_PROTOCOL) === 0) {\n\t        domain = '*';\n\t    }\n\t\n\t    return win.postMessage(serializedMessage, domain);\n\t}), _defineProperty(_SEND_MESSAGE_STRATEG, _conf.CONSTANTS.SEND_STRATEGIES.BRIDGE, function (win, serializedMessage, domain) {\n\t\n\t    if ((0, _lib.isSameDomain)(win)) {\n\t        throw new Error('Post message through bridge disabled between same domain windows');\n\t    }\n\t\n\t    if ((0, _lib.isSameTopWindow)(window, win) !== false) {\n\t        throw new Error('Can only use bridge to communicate between two different windows, not between frames');\n\t    }\n\t\n\t    return (0, _bridge.sendBridgeMessage)(win, serializedMessage, domain);\n\t}), _defineProperty(_SEND_MESSAGE_STRATEG, _conf.CONSTANTS.SEND_STRATEGIES.GLOBAL, function (win, serializedMessage, domain) {\n\t\n\t    if (!(0, _lib.isSameDomain)(win)) {\n\t        throw new Error('Post message through global disabled between different domain windows');\n\t    }\n\t\n\t    if ((0, _lib.isSameTopWindow)(window, win) !== false) {\n\t        throw new Error('Can only use global to communicate between two different windows, not between frames');\n\t    }\n\t\n\t    var foreignGlobal = win[_conf.CONSTANTS.WINDOW_PROPS.POSTROBOT];\n\t\n\t    if (!foreignGlobal) {\n\t        throw new Error('Can not find postRobot global on foreign window');\n\t    }\n\t\n\t    return foreignGlobal.receiveMessage({\n\t        source: window,\n\t        origin: domain,\n\t        data: serializedMessage\n\t    });\n\t}), _SEND_MESSAGE_STRATEG);\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _bridge = __webpack_require__(25);\n\t\n\tObject.keys(_bridge).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _bridge[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _child = __webpack_require__(26);\n\t\n\tObject.keys(_child).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _child[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _common = __webpack_require__(27);\n\t\n\tObject.keys(_common).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _common[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _parent = __webpack_require__(28);\n\t\n\tObject.keys(_parent).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _parent[key];\n\t    }\n\t  });\n\t});\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _conf = __webpack_require__(3);\n\t\n\tvar _lib = __webpack_require__(8);\n\t\n\tvar _global = __webpack_require__(15);\n\t\n\tvar _interface = __webpack_require__(1);\n\t\n\t_global.global.openTunnelToParent = function openTunnelToParent(_ref) {\n\t    var name = _ref.name,\n\t        source = _ref.source,\n\t        canary = _ref.canary,\n\t        _sendMessage = _ref.sendMessage;\n\t\n\t\n\t    var remoteWindow = (0, _lib.getParent)(window);\n\t\n\t    if (!remoteWindow) {\n\t        throw new Error('No parent window found to open tunnel to');\n\t    }\n\t\n\t    return (0, _interface.send)(remoteWindow, _conf.CONSTANTS.POST_MESSAGE_NAMES.OPEN_TUNNEL, {\n\t        name: name,\n\t        sendMessage: function sendMessage() {\n\t\n\t            if ((0, _lib.isWindowClosed)(source)) {\n\t                return;\n\t            }\n\t\n\t            try {\n\t                canary();\n\t            } catch (err) {\n\t                return;\n\t            }\n\t\n\t            _sendMessage.apply(this, arguments);\n\t        }\n\t    }, { domain: '*' });\n\t};\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.openTunnelToOpener = openTunnelToOpener;\n\t\n\tvar _promise = __webpack_require__(10);\n\t\n\tvar _conf = __webpack_require__(3);\n\t\n\tvar _lib = __webpack_require__(8);\n\t\n\tvar _drivers = __webpack_require__(6);\n\t\n\tvar _common = __webpack_require__(27);\n\t\n\tfunction getRemoteBridgeForWindow(win) {\n\t    return _promise.SyncPromise['try'](function () {\n\t        for (var _iterator = (0, _lib.getFrames)(win), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n\t            var _ref;\n\t\n\t            if (_isArray) {\n\t                if (_i >= _iterator.length) break;\n\t                _ref = _iterator[_i++];\n\t            } else {\n\t                _i = _iterator.next();\n\t                if (_i.done) break;\n\t                _ref = _i.value;\n\t            }\n\t\n\t            var _frame = _ref;\n\t\n\t            try {\n\t                if (_frame && _frame !== window && (0, _lib.isSameDomain)(_frame) && _frame[_conf.CONSTANTS.WINDOW_PROPS.POSTROBOT]) {\n\t                    return _frame;\n\t                }\n\t            } catch (err) {\n\t                continue;\n\t            }\n\t        }\n\t\n\t        try {\n\t            var frame = (0, _lib.getFrameByName)(win, (0, _common.getBridgeName)(_lib.util.getDomain()));\n\t\n\t            if (!frame) {\n\t                return;\n\t            }\n\t\n\t            if ((0, _lib.isSameDomain)(frame) && frame[_conf.CONSTANTS.WINDOW_PROPS.POSTROBOT]) {\n\t                return frame;\n\t            }\n\t\n\t            return new _promise.SyncPromise(function (resolve) {\n\t\n\t                var interval = void 0;\n\t                var timeout = void 0;\n\t\n\t                interval = setInterval(function () {\n\t                    if ((0, _lib.isSameDomain)(frame) && frame[_conf.CONSTANTS.WINDOW_PROPS.POSTROBOT]) {\n\t                        clearInterval(interval);\n\t                        clearTimeout(timeout);\n\t                        return resolve(frame);\n\t                    }\n\t\n\t                    setTimeout(function () {\n\t                        clearInterval(interval);\n\t                        return resolve();\n\t                    }, 2000);\n\t                }, 100);\n\t            });\n\t        } catch (err) {\n\t            return;\n\t        }\n\t    });\n\t}\n\t\n\tfunction openTunnelToOpener() {\n\t    return _promise.SyncPromise['try'](function () {\n\t\n\t        var opener = (0, _lib.getOpener)(window);\n\t\n\t        if (!opener) {\n\t            return;\n\t        }\n\t\n\t        if (!(0, _common.needsBridge)({ win: opener })) {\n\t            return;\n\t        }\n\t\n\t        (0, _common.registerRemoteWindow)(opener);\n\t\n\t        return getRemoteBridgeForWindow(opener).then(function (bridge) {\n\t\n\t            if (!bridge) {\n\t                return (0, _common.rejectRemoteSendMessage)(opener, new Error('Can not register with opener: no bridge found in opener'));\n\t            }\n\t\n\t            if (!window.name) {\n\t                return (0, _common.rejectRemoteSendMessage)(opener, new Error('Can not register with opener: window does not have a name'));\n\t            }\n\t\n\t            return bridge[_conf.CONSTANTS.WINDOW_PROPS.POSTROBOT].openTunnelToParent({\n\t\n\t                name: window.name,\n\t\n\t                source: window,\n\t\n\t                canary: function canary() {\n\t                    // pass\n\t                },\n\t                sendMessage: function sendMessage(message) {\n\t\n\t                    if (!window || window.closed) {\n\t                        return;\n\t                    }\n\t\n\t                    (0, _drivers.receiveMessage)({\n\t                        data: message,\n\t                        origin: this.origin,\n\t                        source: this.source\n\t                    });\n\t                }\n\t            }).then(function (_ref2) {\n\t                var source = _ref2.source,\n\t                    origin = _ref2.origin,\n\t                    data = _ref2.data;\n\t\n\t\n\t                if (source !== opener) {\n\t                    throw new Error('Source does not match opener');\n\t                }\n\t\n\t                (0, _common.registerRemoteSendMessage)(source, origin, data.sendMessage);\n\t            })['catch'](function (err) {\n\t\n\t                (0, _common.rejectRemoteSendMessage)(opener, err);\n\t                throw err;\n\t            });\n\t        });\n\t    });\n\t}\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.documentBodyReady = undefined;\n\texports.needsBridgeForBrowser = needsBridgeForBrowser;\n\texports.needsBridgeForWin = needsBridgeForWin;\n\texports.needsBridgeForDomain = needsBridgeForDomain;\n\texports.needsBridge = needsBridge;\n\texports.getBridgeName = getBridgeName;\n\texports.isBridge = isBridge;\n\texports.registerRemoteWindow = registerRemoteWindow;\n\texports.findRemoteWindow = findRemoteWindow;\n\texports.registerRemoteSendMessage = registerRemoteSendMessage;\n\texports.rejectRemoteSendMessage = rejectRemoteSendMessage;\n\texports.sendBridgeMessage = sendBridgeMessage;\n\t\n\tvar _conf = __webpack_require__(3);\n\t\n\tvar _lib = __webpack_require__(8);\n\t\n\tvar _global = __webpack_require__(15);\n\t\n\tvar _drivers = __webpack_require__(6);\n\t\n\tfunction needsBridgeForBrowser() {\n\t\n\t    if ((0, _lib.getUserAgent)(window).match(/MSIE|trident|edge/i)) {\n\t        return true;\n\t    }\n\t\n\t    if (!_conf.CONFIG.ALLOW_POSTMESSAGE_POPUP) {\n\t        return true;\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tfunction needsBridgeForWin(win) {\n\t\n\t    if (win && (0, _lib.isSameTopWindow)(window, win)) {\n\t        return false;\n\t    }\n\t\n\t    if (win && (0, _lib.isSameDomain)(win)) {\n\t        return false;\n\t    }\n\t\n\t    return true;\n\t}\n\t\n\tfunction needsBridgeForDomain(domain) {\n\t\n\t    if (domain && _lib.util.getDomain() === _lib.util.getDomainFromUrl(domain)) {\n\t        return false;\n\t    }\n\t\n\t    return true;\n\t}\n\t\n\tfunction needsBridge(_ref) {\n\t    var win = _ref.win,\n\t        domain = _ref.domain;\n\t\n\t    return needsBridgeForBrowser() && needsBridgeForWin(win) && needsBridgeForDomain(domain);\n\t}\n\t\n\tfunction getBridgeName(domain) {\n\t\n\t    domain = domain || _lib.util.getDomainFromUrl(domain);\n\t\n\t    var sanitizedDomain = domain.replace(/[^a-zA-Z0-9]+/g, '_');\n\t\n\t    var id = _conf.CONSTANTS.BRIDGE_NAME_PREFIX + '_' + sanitizedDomain;\n\t\n\t    return id;\n\t}\n\t\n\tfunction isBridge() {\n\t    return window.name && window.name === getBridgeName(_lib.util.getDomain());\n\t}\n\t\n\tvar documentBodyReady = exports.documentBodyReady = new _lib.promise.Promise(function (resolve) {\n\t\n\t    if (window.document && window.document.body) {\n\t        return resolve(window.document.body);\n\t    }\n\t\n\t    var interval = setInterval(function () {\n\t        if (window.document && window.document.body) {\n\t            clearInterval(interval);\n\t            return resolve(window.document.body);\n\t        }\n\t    }, 10);\n\t});\n\t\n\t_global.global.remoteWindows = _global.global.remoteWindows || [];\n\t\n\tfunction registerRemoteWindow(win) {\n\t    var timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _conf.CONFIG.BRIDGE_TIMEOUT;\n\t\n\t    var sendMessagePromise = new _lib.promise.Promise();\n\t    _global.global.clean.push(_global.global.remoteWindows, { win: win, sendMessagePromise: sendMessagePromise });\n\t}\n\t\n\tfunction findRemoteWindow(win) {\n\t    for (var i = 0; i < _global.global.remoteWindows.length; i++) {\n\t        if (_global.global.remoteWindows[i].win === win) {\n\t            return _global.global.remoteWindows[i];\n\t        }\n\t    }\n\t}\n\t\n\tfunction registerRemoteSendMessage(win, domain, sendMessage) {\n\t\n\t    var remoteWindow = findRemoteWindow(win);\n\t\n\t    if (!remoteWindow) {\n\t        throw new Error('Window not found to register sendMessage to');\n\t    }\n\t\n\t    var sendMessageWrapper = function sendMessageWrapper(remoteWin, message, remoteDomain) {\n\t\n\t        if (remoteWin !== win) {\n\t            throw new Error('Remote window does not match window');\n\t        }\n\t\n\t        if (remoteDomain !== '*' && remoteDomain !== domain) {\n\t            throw new Error('Remote domain ' + remoteDomain + ' does not match domain ' + domain);\n\t        }\n\t\n\t        sendMessage(message);\n\t    };\n\t\n\t    remoteWindow.sendMessagePromise.resolve(sendMessageWrapper);\n\t    remoteWindow.sendMessagePromise = _lib.promise.Promise.resolve(sendMessageWrapper);\n\t}\n\t\n\tfunction rejectRemoteSendMessage(win, err) {\n\t\n\t    var remoteWindow = findRemoteWindow(win);\n\t\n\t    if (!remoteWindow) {\n\t        throw new Error('Window not found on which to reject sendMessage');\n\t    }\n\t\n\t    remoteWindow.sendMessagePromise.asyncReject(err);\n\t}\n\t\n\tfunction sendBridgeMessage(win, message, domain) {\n\t\n\t    var messagingChild = (0, _lib.isOpener)(window, win);\n\t    var messagingParent = (0, _lib.isOpener)(win, window);\n\t\n\t    if (!messagingChild && !messagingParent) {\n\t        throw new Error('Can only send messages to and from parent and popup windows');\n\t    }\n\t\n\t    var remoteWindow = findRemoteWindow(win);\n\t\n\t    if (!remoteWindow) {\n\t        throw new Error('Window not found to send message to');\n\t    }\n\t\n\t    return remoteWindow.sendMessagePromise.then(function (sendMessage) {\n\t        return sendMessage(win, message, domain);\n\t    });\n\t}\n\t\n\t_global.global.receiveMessage = function (event) {\n\t    return (0, _drivers.receiveMessage)(event);\n\t};\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\texports.openBridge = openBridge;\n\texports.destroyBridges = destroyBridges;\n\texports.linkUrl = linkUrl;\n\t\n\tvar _conf = __webpack_require__(3);\n\t\n\tvar _lib = __webpack_require__(8);\n\t\n\tvar _global = __webpack_require__(15);\n\t\n\tvar _interface = __webpack_require__(1);\n\t\n\tvar _drivers = __webpack_require__(6);\n\t\n\tvar _common = __webpack_require__(27);\n\t\n\t_global.global.bridges = _global.global.bridges || {};\n\t\n\tfunction listenForRegister(source, domain) {\n\t    (0, _interface.on)(_conf.CONSTANTS.POST_MESSAGE_NAMES.OPEN_TUNNEL, { source: source, domain: domain }, function (_ref) {\n\t        var origin = _ref.origin,\n\t            data = _ref.data;\n\t\n\t\n\t        if (origin !== domain) {\n\t            throw new Error('Domain ' + domain + ' does not match origin ' + origin);\n\t        }\n\t\n\t        if (!data.name) {\n\t            throw new Error('Register window expected to be passed window name');\n\t        }\n\t\n\t        if (!data.sendMessage) {\n\t            throw new Error('Register window expected to be passed sendMessage method');\n\t        }\n\t\n\t        var winDetails = _global.global.popupWindows[data.name];\n\t\n\t        if (!winDetails) {\n\t            throw new Error('Window with name ' + data.name + ' does not exist, or was not opened by this window');\n\t        }\n\t\n\t        if (!winDetails.domain) {\n\t            throw new Error('We do not have a registered domain for window ' + data.name);\n\t        }\n\t\n\t        if (winDetails.domain !== origin) {\n\t            throw new Error('Message origin ' + origin + ' does not matched registered window origin ' + winDetails.domain);\n\t        }\n\t\n\t        (0, _common.registerRemoteSendMessage)(winDetails.win, domain, data.sendMessage);\n\t\n\t        return {\n\t            sendMessage: function sendMessage(message) {\n\t\n\t                if (!window || window.closed) {\n\t                    return;\n\t                }\n\t\n\t                (0, _drivers.receiveMessage)({\n\t                    data: message,\n\t                    origin: winDetails.domain,\n\t                    source: winDetails.win\n\t                });\n\t            }\n\t        };\n\t    });\n\t}\n\t\n\tfunction openBridgeFrame(name, url) {\n\t\n\t    _lib.log.debug('Opening bridge:', name, url);\n\t\n\t    var iframe = document.createElement('iframe');\n\t\n\t    iframe.setAttribute('name', name);\n\t    iframe.setAttribute('id', name);\n\t\n\t    iframe.setAttribute('style', 'display: none; margin: 0; padding: 0; border: 0px none; overflow: hidden;');\n\t    iframe.setAttribute('frameborder', '0');\n\t    iframe.setAttribute('border', '0');\n\t    iframe.setAttribute('scrolling', 'no');\n\t    iframe.setAttribute('allowTransparency', 'true');\n\t\n\t    iframe.setAttribute('tabindex', '-1');\n\t    iframe.setAttribute('hidden', 'true');\n\t    iframe.setAttribute('title', '');\n\t    iframe.setAttribute('role', 'presentation');\n\t\n\t    iframe.src = url;\n\t\n\t    return iframe;\n\t}\n\t\n\tfunction openBridge(url, domain) {\n\t\n\t    domain = domain || _lib.util.getDomainFromUrl(url);\n\t\n\t    if (_global.global.bridges[domain]) {\n\t        return _global.global.bridges[domain];\n\t    }\n\t\n\t    return _global.global.clean.setItem(_global.global.bridges, domain, _lib.promise.run(function () {\n\t\n\t        if (_lib.util.getDomain() === domain) {\n\t            throw new Error('Can not open bridge on the same domain as current domain: ' + domain);\n\t        }\n\t\n\t        var name = (0, _common.getBridgeName)(domain);\n\t        var frame = (0, _lib.getFrameByName)(window, name);\n\t\n\t        if (frame) {\n\t            throw new Error('Frame with name ' + name + ' already exists on page');\n\t        }\n\t\n\t        var iframe = openBridgeFrame(name, url);\n\t\n\t        return _common.documentBodyReady.then(function (body) {\n\t\n\t            return new _lib.promise.Promise(function (resolve, reject) {\n\t\n\t                setTimeout(resolve, 1);\n\t            }).then(function () {\n\t\n\t                body.appendChild(iframe);\n\t\n\t                _global.global.clean.register('bridgeFrames', function () {\n\t                    body.removeChild(iframe);\n\t                    delete _global.global.bridges[domain];\n\t                });\n\t\n\t                var bridge = iframe.contentWindow;\n\t\n\t                listenForRegister(bridge, domain);\n\t\n\t                return new _lib.promise.Promise(function (resolve, reject) {\n\t\n\t                    iframe.onload = resolve;\n\t                    iframe.onerror = reject;\n\t                }).then(function () {\n\t\n\t                    return (0, _lib.onWindowReady)(bridge, _conf.CONFIG.BRIDGE_TIMEOUT, 'Bridge ' + url);\n\t                }).then(function () {\n\t\n\t                    return bridge;\n\t                });\n\t            });\n\t        });\n\t    }));\n\t}\n\t\n\tfunction destroyBridges() {\n\t    return _global.global.clean.run('bridgeFrames');\n\t}\n\t\n\t_global.global.popupWindows = _global.global.popupWindows || {};\n\t\n\tvar windowOpen = window.open;\n\t\n\twindow.open = function (url, name, options, last) {\n\t\n\t    var domain = url;\n\t\n\t    if (url && url.indexOf(_conf.CONSTANTS.MOCK_PROTOCOL) === 0) {\n\t        var _url$split = url.split('|');\n\t\n\t        var _url$split2 = _slicedToArray(_url$split, 2);\n\t\n\t        domain = _url$split2[0];\n\t        url = _url$split2[1];\n\t    }\n\t\n\t    if (domain) {\n\t        domain = _lib.util.getDomainFromUrl(domain);\n\t    }\n\t\n\t    var win = windowOpen.call(this, url, name, options, last);\n\t\n\t    if (url) {\n\t        (0, _common.registerRemoteWindow)(win);\n\t    }\n\t\n\t    if (name) {\n\t        _global.global.clean.setItem(_global.global.popupWindows, name, { win: win, domain: domain });\n\t    }\n\t\n\t    return win;\n\t};\n\t\n\tfunction linkUrl(win, url) {\n\t\n\t    for (var _iterator = Object.keys(_global.global.popupWindows), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n\t        var _ref2;\n\t\n\t        if (_isArray) {\n\t            if (_i >= _iterator.length) break;\n\t            _ref2 = _iterator[_i++];\n\t        } else {\n\t            _i = _iterator.next();\n\t            if (_i.done) break;\n\t            _ref2 = _i.value;\n\t        }\n\t\n\t        var name = _ref2;\n\t\n\t        var winOptions = _global.global.popupWindows[name];\n\t\n\t        if (winOptions.win === win) {\n\t            winOptions.domain = _lib.util.getDomainFromUrl(url);\n\t\n\t            (0, _common.registerRemoteWindow)(win);\n\t\n\t            break;\n\t        }\n\t    }\n\t}\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.listeners = undefined;\n\texports.resetListeners = resetListeners;\n\texports.getRequestListener = getRequestListener;\n\texports.removeRequestListener = removeRequestListener;\n\texports.addRequestListener = addRequestListener;\n\t\n\tvar _global = __webpack_require__(15);\n\t\n\t_global.global.listeners = _global.global.listeners || {\n\t    request: [],\n\t    response: []\n\t};\n\t\n\tvar listeners = exports.listeners = _global.global.listeners;\n\t\n\tfunction resetListeners() {\n\t    _global.global.listeners.request = [];\n\t    _global.global.listeners.response = [];\n\t}\n\t\n\tfunction isRegex(item) {\n\t    return Object.prototype.toString.call(item) === '[object RegExp]';\n\t}\n\t\n\tfunction matchDomain(domain, origin) {\n\t\n\t    if (typeof domain === 'string') {\n\t\n\t        if (isRegex(origin)) {\n\t            return false;\n\t        }\n\t\n\t        if (Array.isArray(origin)) {\n\t            return false;\n\t        }\n\t\n\t        return domain === '*' || origin === domain;\n\t    }\n\t\n\t    if (isRegex(domain)) {\n\t\n\t        if (isRegex(origin)) {\n\t            return domain.toString() === origin.toString();\n\t        }\n\t\n\t        if (Array.isArray(origin)) {\n\t            return false;\n\t        }\n\t\n\t        return origin.match(domain);\n\t    }\n\t\n\t    if (Array.isArray(domain)) {\n\t\n\t        if (isRegex(origin)) {\n\t            return false;\n\t        }\n\t\n\t        if (Array.isArray(origin)) {\n\t            return JSON.stringify(domain) === JSON.stringify(origin);\n\t        }\n\t\n\t        return domain.indexOf(origin) !== -1;\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tfunction getRequestListener(name, win, domain) {\n\t\n\t    var result = {};\n\t\n\t    for (var _iterator = _global.global.listeners.request, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n\t        var _ref;\n\t\n\t        if (_isArray) {\n\t            if (_i >= _iterator.length) break;\n\t            _ref = _iterator[_i++];\n\t        } else {\n\t            _i = _iterator.next();\n\t            if (_i.done) break;\n\t            _ref = _i.value;\n\t        }\n\t\n\t        var requestListener = _ref;\n\t\n\t\n\t        if (requestListener.name !== name) {\n\t            continue;\n\t        }\n\t\n\t        var specifiedWin = requestListener.win && requestListener.win !== '*';\n\t        var specifiedDomain = requestListener.domain && requestListener.domain !== '*';\n\t\n\t        var matchedWin = specifiedWin && requestListener.win === win;\n\t        var matchedDomain = specifiedDomain && matchDomain(requestListener.domain, domain);\n\t\n\t        if (specifiedWin && specifiedDomain) {\n\t            if (matchedWin && matchedDomain) {\n\t                result.all = result.all || requestListener.options;\n\t            }\n\t        } else if (specifiedDomain) {\n\t            if (matchedDomain) {\n\t                result.domain = result.domain || requestListener.options;\n\t            }\n\t        } else if (specifiedWin) {\n\t            if (matchedWin) {\n\t                result.win = result.win || requestListener.options;\n\t            }\n\t        } else {\n\t            result.name = result.name || requestListener.options;\n\t        }\n\t    }\n\t\n\t    return result.all || result.domain || result.win || result.name;\n\t}\n\t\n\tfunction removeRequestListener(options) {\n\t\n\t    for (var _iterator2 = _global.global.listeners.request, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n\t        var _ref2;\n\t\n\t        if (_isArray2) {\n\t            if (_i2 >= _iterator2.length) break;\n\t            _ref2 = _iterator2[_i2++];\n\t        } else {\n\t            _i2 = _iterator2.next();\n\t            if (_i2.done) break;\n\t            _ref2 = _i2.value;\n\t        }\n\t\n\t        var listener = _ref2;\n\t\n\t        if (listener.options === options) {\n\t            _global.global.listeners.request.splice(_global.global.listeners.request.indexOf(listener), 1);\n\t        }\n\t    }\n\t}\n\t\n\tfunction addRequestListener(name, win, domain, options, override) {\n\t\n\t    var listener = getRequestListener(name, win, domain);\n\t\n\t    if (listener) {\n\t        if (override) {\n\t            removeRequestListener(listener);\n\t        } else {\n\t\n\t            if (win) {\n\t                throw new Error('Request listener already exists for ' + name + ' on domain ' + domain + ' for specified window: ' + (listener.win === win));\n\t            }\n\t\n\t            throw new Error('Request listener already exists for ' + name + ' on domain ' + domain);\n\t        }\n\t    }\n\t\n\t    _global.global.clean.push(_global.global.listeners.request, { name: name, win: win, domain: domain, options: options });\n\t}\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.on = undefined;\n\texports.listen = listen;\n\texports.once = once;\n\texports.listener = listener;\n\t\n\tvar _conf = __webpack_require__(3);\n\t\n\tvar _lib = __webpack_require__(8);\n\t\n\tvar _drivers = __webpack_require__(6);\n\t\n\tfunction listen(options) {\n\t\n\t    if (!options.name) {\n\t        throw new Error('Expected options.name');\n\t    }\n\t\n\t    options.handler = options.handler || _lib.util.noop;\n\t\n\t    options.errorHandler = options.errorHandler || function (err) {\n\t        throw err;\n\t    };\n\t\n\t    if (options.once) {\n\t        var handler = options.handler;\n\t        options.handler = _lib.util.once(function () {\n\t            (0, _drivers.removeRequestListener)(options);\n\t            return handler.apply(this, arguments);\n\t        });\n\t    }\n\t\n\t    var override = options.override || _conf.CONFIG.MOCK_MODE;\n\t\n\t    if (options.source) {\n\t        options.window = options.source;\n\t    }\n\t\n\t    options.domain = options.domain || '*';\n\t\n\t    (0, _drivers.addRequestListener)(options.name, options.window, options.domain, options, override);\n\t\n\t    options.handleError = function (err) {\n\t        // removeRequestListener(options);\n\t        options.errorHandler(err);\n\t    };\n\t\n\t    if (options.window && options.errorOnClose) {\n\t        var interval = _lib.util.safeInterval(function () {\n\t            if ((0, _lib.isWindowClosed)(options.window)) {\n\t                interval.cancel();\n\t                options.handleError(new Error('Post message target window is closed'));\n\t            }\n\t        }, 50);\n\t    }\n\t\n\t    return {\n\t        cancel: function cancel() {\n\t            (0, _drivers.removeRequestListener)(options);\n\t        }\n\t    };\n\t}\n\t\n\tfunction _on(name, options, handler, errorHandler) {\n\t\n\t    if (typeof options === 'function') {\n\t        errorHandler = handler;\n\t        handler = options;\n\t        options = {};\n\t    }\n\t\n\t    options = options || {};\n\t\n\t    options.name = name;\n\t    options.handler = handler || options.handler;\n\t    options.errorHandler = errorHandler || options.errorHandler;\n\t\n\t    return listen(options);\n\t}\n\t\n\texports.on = _on;\n\tfunction once(name, options, handler, errorHandler) {\n\t\n\t    if (typeof options === 'function') {\n\t        errorHandler = handler;\n\t        handler = options;\n\t        options = {};\n\t    }\n\t\n\t    options = options || {};\n\t\n\t    options.name = name;\n\t    options.handler = handler || options.handler;\n\t    options.errorHandler = errorHandler || options.errorHandler;\n\t    options.once = true;\n\t\n\t    var prom = new _lib.promise.Promise(function (resolve, reject) {\n\t        options.handler = options.handler || function (event) {\n\t            return resolve(event);\n\t        };\n\t        options.errorHandler = options.errorHandler || reject;\n\t    });\n\t\n\t    var myListener = listen(options);\n\t\n\t    _lib.util.extend(prom, myListener);\n\t\n\t    return prom;\n\t}\n\t\n\tfunction listener() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t\n\t    return {\n\t        on: function on(name, handler, errorHandler) {\n\t            return _on(name, options, handler, errorHandler);\n\t        }\n\t    };\n\t}\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.CONSTANTS = exports.CONFIG = undefined;\n\texports.enableMockMode = enableMockMode;\n\texports.disableMockMode = disableMockMode;\n\t\n\tvar _conf = __webpack_require__(3);\n\t\n\tObject.defineProperty(exports, 'CONFIG', {\n\t    enumerable: true,\n\t    get: function get() {\n\t        return _conf.CONFIG;\n\t    }\n\t});\n\tObject.defineProperty(exports, 'CONSTANTS', {\n\t    enumerable: true,\n\t    get: function get() {\n\t        return _conf.CONSTANTS;\n\t    }\n\t});\n\texports.disable = disable;\n\t\n\tvar _drivers = __webpack_require__(6);\n\t\n\tfunction enableMockMode() {\n\t    _conf.CONFIG.MOCK_MODE = true;\n\t}\n\t\n\tfunction disableMockMode() {\n\t    _conf.CONFIG.MOCK_MODE = false;\n\t}\n\t\n\tfunction disable() {\n\t    delete window[_conf.CONSTANTS.WINDOW_PROPS.POSTROBOT];\n\t    window.removeEventListener('message', _drivers.messageListener);\n\t}\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// post-robot.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2448d0850db0684651a7","\nimport { initOnReady, listenForMethods } from './lib';\nimport { listenForMessages } from './drivers';\nimport { global } from './global';\nimport { openTunnelToOpener } from './bridge';\n\nexport function init() {\n\n    if (!global.initialized) {\n        listenForMessages();\n        openTunnelToOpener();\n        initOnReady();\n        listenForMethods();\n    }\n\n    global.initialized = true;\n}\n\ninit();\n\nexport function reset() {\n    return global.clean.all().then(() => {\n        global.initialized = false;\n        return init();\n    });\n}\n\nexport * from './interface';\nexport { Promise } from './lib';\n\nexport default module.exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","\nimport { getAncestor } from '../lib/windows';\n\nexport * from './client';\nexport * from './server';\nexport * from './config';\n\nimport * as windowUtil from '../lib/windows';\n\nexport let parent = getAncestor();\n\nexport { openBridge, linkUrl, isBridge, needsBridge, needsBridgeForBrowser, needsBridgeForWin, needsBridgeForDomain, openTunnelToOpener, destroyBridges } from '../bridge';\n\nexport { util } from '../lib/util';\n\nexport let winutil = windowUtil;\n\n\n\n// WEBPACK FOOTER //\n// ./src/interface/index.js","\nimport { CONFIG, CONSTANTS } from '../conf';\nimport { sendMessage } from '../drivers';\nimport { global } from '../global';\nimport { util, promise, getAncestor, isAncestor, onWindowReady, isWindowClosed } from '../lib';\n\n\nexport function request(options) {\n\n    return promise.nodeify(new promise.Promise((resolve, reject) => {\n\n        if (!options.name) {\n            throw new Error('Expected options.name');\n        }\n\n        \n        if (CONFIG.MOCK_MODE) {\n            options.window = window;\n\n        } else if (typeof options.window === 'string') {\n            let el = document.getElementById(options.window);\n\n            if (!el) {\n                throw new Error(`Expected options.window ${options.window} to be a valid element id`);\n            }\n\n            if (el.tagName.toLowerCase() !== 'iframe') {\n                throw new Error(`Expected options.window ${options.window} to be an iframe`);\n            }\n\n            if (!el.contentWindow) {\n                throw new Error('Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.');\n            }\n\n            options.window = el.contentWindow;\n\n            \n        } else if (options.window instanceof HTMLElement) {\n            \n            if (options.window.tagName.toLowerCase() !== 'iframe') {\n                throw new Error(`Expected options.window ${options.window} to be an iframe`);\n            }\n\n            if (!options.window.contentWindow) {\n                throw new Error('Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.');\n            }\n            \n            options.window = options.window.contentWindow;\n        }\n\n        if (!options.window) {\n            throw new Error('Expected options.window to be a window object, iframe, or iframe element id.');\n        }\n\n        options.domain = options.domain || '*';\n\n        let hash = `${options.name}_${util.uniqueID()}`;\n        global.clean.setItem(global.listeners.response, hash, options);\n\n        if (isWindowClosed(options.window)) {\n            throw new Error('Target window is closed');\n        }\n\n        let hasResult = false;\n\n        options.respond = (err, result) => {\n            if (!err) {\n                hasResult = true;\n            }\n\n            return err ? reject(err) : resolve(result);\n        };\n\n        return promise.run(() => {\n\n            if (isAncestor(window, options.window)) {\n                return onWindowReady(options.window);\n            }\n\n        }).then(() => {\n\n            sendMessage(options.window, {\n                hash,\n                type: CONSTANTS.POST_MESSAGE_TYPE.REQUEST,\n                name: options.name,\n                data: options.data,\n                fireAndForget: options.fireAndForget\n            }, options.domain).catch(reject);\n\n            if (options.fireAndForget) {\n                return resolve();\n            }\n\n            let ackTimeout = util.intervalTimeout(CONFIG.ACK_TIMEOUT, 100, remaining => {\n\n                if (options.ack || isWindowClosed(options.window)) {\n                    return ackTimeout.cancel();\n                }\n\n                if (!remaining) {\n                    return reject(new Error(`No ack for postMessage ${options.name} in ${CONFIG.ACK_TIMEOUT}ms`));\n                }\n            });\n\n            if (options.timeout) {\n                let timeout = util.intervalTimeout(options.timeout, 100, remaining => {\n\n                    if (hasResult || isWindowClosed(options.window)) {\n                        return timeout.cancel();\n                    }\n\n                    if (!remaining) {\n                        return reject(new Error(`Post message response timed out after ${options.timeout} ms`));\n                    }\n\n                }, options.timeout);\n            }\n\n        }).catch(reject);\n\n    }), options.callback);\n}\n\nexport function send(window, name, data, options, callback) {\n\n    if (!callback) {\n        if (!options && typeof data === 'function') {\n            callback = data;\n            options = {};\n            data = {};\n        } else if (typeof options === 'function') {\n            callback = options;\n            options = {};\n        }\n    }\n\n    options = options || {};\n    options.window = window;\n    options.name = name;\n    options.data = data;\n    options.callback = callback;\n\n    return request(options);\n}\n\nexport function sendToParent(name, data, options, callback) {\n\n    let win = getAncestor();\n\n    if (!win) {\n        return new promise.Promise((resolve, reject) => reject(new Error('Window does not have a parent')));\n    }\n\n    return send(win, name, data, options, callback);\n}\n\nexport function client(options = {}) {\n\n    if (!options.window) {\n        throw new Error(`Expected options.window`);\n    }\n\n    return {\n        send(name, data, callback) {\n            return send(options.window, name, data, options, callback);\n        }\n    };\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/interface/client.js","\nexport * from './config';\nexport * from './constants';\n\n\n// WEBPACK FOOTER //\n// ./src/conf/index.js","\nimport { CONSTANTS } from './constants';\n\nexport let CONFIG = {\n    \n    ALLOW_POSTMESSAGE_POPUP: __TEST__ ? false : true,\n\n    LOG_LEVEL: 'info',\n\n    BRIDGE_TIMEOUT: 5000,\n    ACK_TIMEOUT: 1000,\n\n    LOG_TO_PAGE: false,\n    \n    MOCK_MODE: false,\n\n    ALLOWED_POST_MESSAGE_METHODS: {\n        [ CONSTANTS.SEND_STRATEGIES.POST_MESSAGE ]: true,\n        [ CONSTANTS.SEND_STRATEGIES.BRIDGE ]: true,\n        [ CONSTANTS.SEND_STRATEGIES.GLOBAL ]: true\n    }\n};\n\nif (window.location.href.indexOf(CONSTANTS.FILE_PROTOCOL) === 0) {\n    CONFIG.ALLOW_POSTMESSAGE_POPUP = true;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/conf/config.js","\nexport let CONSTANTS = {\n\n    POST_MESSAGE_TYPE: {\n        REQUEST: 'postrobot_message_request',\n        RESPONSE: 'postrobot_message_response',\n        ACK: 'postrobot_message_ack'\n    },\n\n    POST_MESSAGE_ACK: {\n        SUCCESS: 'success',\n        ERROR: 'error'\n    },\n\n    POST_MESSAGE_NAMES: {\n        METHOD: 'postrobot_method',\n        READY: 'postrobot_ready',\n        OPEN_TUNNEL: 'postrobot_open_tunnel'\n    },\n\n    WINDOW_TYPES: {\n        FULLPAGE: 'fullpage',\n        POPUP: 'popup',\n        IFRAME: 'iframe'\n    },\n\n    WINDOW_PROPS: {\n        POSTROBOT: '__postRobot__'\n    },\n\n    SERIALIZATION_TYPES: {\n        METHOD: 'postrobot_method',\n        ERROR: 'postrobot_error'\n    },\n\n    SEND_STRATEGIES: {\n        POST_MESSAGE: 'postrobot_post_message',\n        BRIDGE: 'postrobot_bridge',\n        GLOBAL: 'postrobot_global'\n    },\n\n    MOCK_PROTOCOL: 'mock:',\n    FILE_PROTOCOL: 'file:',\n\n    BRIDGE_NAME_PREFIX: '__postrobot_bridge__',\n    POSTROBOT_PROXY: '__postrobot_proxy__'\n};\n\nexport let POST_MESSAGE_NAMES_LIST = Object.keys(CONSTANTS.POST_MESSAGE_NAMES).map(key => CONSTANTS.POST_MESSAGE_NAMES[key]);\n\n\n\n// WEBPACK FOOTER //\n// ./src/conf/constants.js","\nexport * from './receive';\nexport * from './send';\nexport * from './listeners';\n\n\n// WEBPACK FOOTER //\n// ./src/drivers/index.js","\nimport { CONSTANTS, POST_MESSAGE_NAMES_LIST } from '../../conf';\nimport { deserializeMethods, log, isWindowClosed, jsonParse, util } from '../../lib';\nimport { emulateIERestrictions } from '../../compat';\nimport { global } from '../../global';\n\nimport { RECEIVE_MESSAGE_TYPES } from './types';\n\nglobal.receivedMessages = global.receivedMessages || [];\n\nfunction parseMessage(message) {\n\n    try {\n        message = jsonParse(message);\n    } catch (err) {\n        return;\n    }\n\n    if (!message) {\n        return;\n    }\n\n    message = message[CONSTANTS.WINDOW_PROPS.POSTROBOT];\n\n    if (!message) {\n        return;\n    }\n\n    if (!message.type) {\n        return;\n    }\n\n    if (!RECEIVE_MESSAGE_TYPES[message.type]) {\n        return;\n    }\n\n    return message;\n}\n\n\nexport function receiveMessage(event) {\n\n    if (!window || window.closed) {\n        throw new Error(`Message recieved in closed window`);\n    }\n\n    try {\n        if (!event.source) {\n            return;\n        }\n    } catch (err) {\n        return;\n    }\n\n    let { source, origin, data } = event;\n\n    let message = parseMessage(data);\n\n    if (!message) {\n        return;\n    }\n\n    if (message.sourceDomain.indexOf(CONSTANTS.MOCK_PROTOCOL) === 0 || message.sourceDomain.indexOf(CONSTANTS.FILE_PROTOCOL) === 0) {\n        origin = message.sourceDomain;\n    }\n\n    if (global.receivedMessages.indexOf(message.id) === -1) {\n        global.clean.push(global.receivedMessages, message.id);\n    } else {\n        return;\n    }\n\n    let level;\n\n    if (POST_MESSAGE_NAMES_LIST.indexOf(message.name) !== -1 || message.type === CONSTANTS.POST_MESSAGE_TYPE.ACK) {\n        level = 'debug';\n    } else if (message.ack === 'error') {\n        level = 'error';\n    } else {\n        level = 'info';\n    }\n\n    log.logLevel(level, [ '\\n\\n\\t', '#receive', message.type.replace(/^postrobot_message_/, ''), '::', message.name, '::', origin, '\\n\\n', message ]);\n\n    if (isWindowClosed(source)) {\n        return log.debug(`Source window is closed - can not send ${message.type} ${message.name}`);\n    }\n\n    if (message.data) {\n        message.data = deserializeMethods(source, origin, message.data);\n    }\n\n    RECEIVE_MESSAGE_TYPES[message.type](source, origin, message);\n}\n\nexport function messageListener(event) {\n\n    try {\n        event.source // eslint-disable-line\n    } catch (err) {\n        return;\n    }\n\n    event = {\n        source: event.source || event.sourceElement,\n        origin: event.origin || event.originalEvent.origin,\n        data: event.data\n    };\n\n    try {\n        emulateIERestrictions(event.source, window);\n    } catch (err) {\n        return;\n    }\n\n    receiveMessage(event);\n}\n\nexport function listenForMessages() {\n    let listener = util.listen(window, 'message', messageListener);\n\n    global.clean.register('listener', () => {\n        listener.cancel();\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/drivers/receive/index.js","\nexport * from './promise';\nexport * from './util';\nexport * from './log';\nexport * from './windows';\nexport * from './methods';\nexport * from './tick';\nexport * from './ready';\nexport * from './cleanup';\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/index.js","\nimport { SyncPromise } from 'sync-browser-mocks/src/promise';\nimport { nextTick } from './tick';\n\nexport let Promise = SyncPromise;\n\nexport let promise = {\n\n    Promise,\n\n    run(method) {\n        return Promise.resolve().then(method);\n    },\n\n    nextTick(method) {\n        return new Promise((resolve, reject) => {\n            nextTick(() => {\n                return promise.run(method).then(resolve, reject);\n            });\n        });\n    },\n\n    method(method) {\n        return function promiseWrapper() {\n            return Promise.resolve().then(() => {\n                return method.apply(this, arguments);\n            });\n        };\n    },\n\n    nodeify(prom, callback) {\n        if (!callback) {\n            return prom;\n        }\n        prom.then(result => {\n            callback(null, result);\n        }, err => {\n            callback(err);\n        });\n    },\n\n    deNodeify(method, ...args) {\n        return new Promise((resolve, reject) => {\n            try {\n                if (args.length < method.length) {\n                    return method(...args, (err, result) => {\n                        return err ? reject(err) : resolve(result);\n                    });\n                }\n\n                return promise.run(() => {\n                    return method(...args);\n                }).then(resolve, reject);\n\n            } catch (err) {\n                return reject(err);\n            }\n        });\n    },\n\n    map(items, method) {\n\n        let results = [];\n        for (let i = 0; i < items.length; i++) {\n            results.push(promise.run(() => {\n                return method(items[i]);\n            }));\n        }\n        return Promise.all(results);\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/lib/promise.js","\nfunction trycatch(method, successHandler, errorHandler) {\n\n    let isCalled = false;\n    let isSuccess = false;\n    let isError = false;\n    let err, res;\n\n    function flush() {\n        if (isCalled) {\n            if (isError) {\n                return errorHandler(err);\n            } else if (isSuccess) {\n                return successHandler(res);\n            }\n        }\n    }\n\n    try {\n        method(function(result) {\n            res = result;\n            isSuccess = true;\n            flush();\n        }, function(error) {\n            err = error;\n            isError = true;\n            flush();\n        });\n    } catch (error) {\n        return errorHandler(error);\n    }\n\n    isCalled = true;\n    flush();\n}\n\nlet possiblyUnhandledPromiseHandlers = [];\nlet possiblyUnhandledPromises = [];\nlet possiblyUnhandledPromiseTimeout;\n\nfunction addPossiblyUnhandledPromise(promise) {\n    possiblyUnhandledPromises.push(promise);\n    possiblyUnhandledPromiseTimeout = possiblyUnhandledPromiseTimeout || setTimeout(flushPossiblyUnhandledPromises, 1);\n}\n\nfunction flushPossiblyUnhandledPromises() {\n\n    possiblyUnhandledPromiseTimeout = null;\n    let promises = possiblyUnhandledPromises;\n    possiblyUnhandledPromises = [];\n\n    for (let i = 0; i < promises.length; i++) {\n        let promise = promises[i];\n\n        if (promise.silentReject) {\n            continue;\n        }\n\n        promise.handlers.push({\n            onError(err) {\n                if (promise.silentReject) {\n                    return;\n                }\n\n                dispatchError(err);\n            }\n        });\n\n        promise.dispatch();\n    }\n}\n\nlet dispatchedErrors = [];\n\nfunction dispatchError(err) {\n\n    if (dispatchedErrors.indexOf(err) !== -1) {\n        return;\n    }\n\n    dispatchedErrors.push(err);\n\n    setTimeout(() => {\n        throw err;\n    }, 1);\n\n    for (let j = 0; j < possiblyUnhandledPromiseHandlers.length; j++) {\n        possiblyUnhandledPromiseHandlers[j](err);\n    }\n}\n\n\nlet toString = ({}).toString;\n\nfunction isPromise(item) {\n    try {\n        if (!item) {\n            return false;\n        }\n\n        if (window.Window && item instanceof window.Window) {\n            return false;\n        }\n\n        if (window.constructor && item instanceof window.constructor) {\n            return false;\n        }\n\n        if (toString) {\n            let name = toString.call(item);\n\n            if (name === '[object Window]' || name === '[object global]' || name === '[object DOMWindow]') {\n                return false;\n            }\n        }\n\n        if (item && item.then instanceof Function) {\n            return true;\n        }\n    } catch (err) {\n        return false\n    }\n\n    return false\n}\n\nexport let SyncPromise = function SyncPromise(handler) {\n\n    this.resolved = false;\n    this.rejected = false;\n\n    this.silentReject = false;\n\n    this.handlers = [];\n\n    addPossiblyUnhandledPromise(this);\n\n    if (!handler) {\n        return;\n    }\n\n    let self = this;\n\n    trycatch(handler, function(res) {\n        return self.resolve(res);\n    }, function(err) {\n        return self.reject(err);\n    });\n};\n\nSyncPromise.resolve = function SyncPromiseResolve(value) {\n\n    if (isPromise(value)) {\n        return value;\n    }\n\n    return new SyncPromise().resolve(value);\n};\n\nSyncPromise.reject = function SyncPromiseResolve(error) {\n    return new SyncPromise().reject(error);\n};\n\nSyncPromise.prototype.resolve = function (result) {\n    if (this.resolved || this.rejected) {\n        return this;\n    }\n\n    if (isPromise(result)) {\n        throw new Error('Can not resolve promise with another promise');\n    }\n\n    this.resolved = true;\n    this.value = result;\n    this.dispatch();\n\n    return this;\n};\n\nSyncPromise.prototype.reject = function(error) {\n    if (this.resolved || this.rejected) {\n        return this;\n    }\n\n    if (isPromise(error)) {\n        throw new Error('Can not reject promise with another promise');\n    }\n\n    this.rejected = true;\n    this.value = error;\n    this.dispatch();\n\n    return this;\n};\n\nSyncPromise.prototype.asyncReject = function(error) {\n    this.silentReject = true;\n    this.reject(error);\n}\n\nSyncPromise.prototype.dispatch = function() {\n\n    if (!this.resolved && !this.rejected) {\n        return;\n    }\n\n    while (this.handlers.length) {\n\n        let handler = this.handlers.shift();\n\n        let result, error;\n\n        try {\n            if (this.resolved) {\n                result = handler.onSuccess ? handler.onSuccess(this.value) : this.value;\n            } else if (this.rejected) {\n                if (handler.onError) {\n                    result = handler.onError(this.value);\n                } else {\n                    error = this.value;\n                }\n            }\n        } catch (err) {\n            error = err;\n        }\n\n        if (result === this) {\n            throw new Error('Can not return a promise from the the then handler of the same promise');\n        }\n\n        if (!handler.promise) {\n            continue;\n        }\n\n        if (error) {\n            handler.promise.reject(error);\n\n        } else if (isPromise(result)) {\n            result.then(res => { handler.promise.resolve(res); },\n                        err => { handler.promise.reject(err);  });\n\n        } else {\n            handler.promise.resolve(result);\n        }\n    }\n};\n\nSyncPromise.prototype.then = function(onSuccess, onError) {\n\n    if (onSuccess && typeof onSuccess !== 'function' && !onSuccess.call) {\n        throw new Error('Promise.then expected a function for success handler');\n    }\n\n    if (onError && typeof onError !== 'function' && !onError.call) {\n        throw new Error('Promise.then expected a function for error handler');\n    }\n\n    let promise = new SyncPromise(null, this);\n\n    this.handlers.push({\n        promise: promise,\n        onSuccess: onSuccess,\n        onError: onError\n    });\n\n    this.silentReject = true;\n\n    this.dispatch();\n\n    return promise;\n};\n\nSyncPromise.prototype.catch = function(onError) {\n    return this.then(null, onError);\n};\n\nSyncPromise.prototype.finally = function(handler) {\n    return this.then(function(result) {\n        return SyncPromise.try(handler)\n            .then(() => {\n                return result;\n            });\n    }, function(err) {\n        return SyncPromise.try(handler)\n            .then(() => {\n                throw err;\n            });\n    });\n};\n\nSyncPromise.all = function(promises) {\n\n    let promise = new SyncPromise();\n    let count = promises.length;\n    let results = [];\n\n    for (let i = 0; i < promises.length; i++) {\n\n        let prom = isPromise(promises[i]) ? promises[i] : SyncPromise.resolve(promises[i]);\n\n        prom.then(function(result) {\n            results[i] = result;\n            count -= 1;\n            if (count === 0) {\n                promise.resolve(results);\n            }\n        }, function(err) {\n            promise.reject(err);\n        });\n    }\n\n    if (!count) {\n        promise.resolve(results);\n    }\n\n    return promise;\n};\n\nSyncPromise.onPossiblyUnhandledException = function syncPromiseOnPossiblyUnhandledException(handler) {\n    possiblyUnhandledPromiseHandlers.push(handler);\n};\n\nSyncPromise.try = function syncPromiseTry(method) {\n    return SyncPromise.resolve().then(method);\n}\n\nSyncPromise.delay = function syncPromiseDelay(delay) {\n    return new SyncPromise(resolve => {\n        setTimeout(resolve, delay);\n    });\n}\n\nSyncPromise.hash = function(obj) {\n\n    let results = {};\n    let promises = [];\n\n    for (let key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            promises.push(SyncPromise.resolve(obj[key]).then(result => {\n                results[key] = result;\n            }));\n        }\n    }\n\n    return SyncPromise.all(promises).then(() => {\n        return results;\n    });\n}\n\nSyncPromise.promisifyCall = function() {\n\n    let args = Array.prototype.slice.call(arguments);\n    let method = args.shift();\n\n    if (typeof method !== 'function') {\n        throw new Error(`Expected promisifyCall to be called with a function`);\n    }\n\n    return new SyncPromise((resolve, reject) => {\n\n        args.push((err, result) => {\n            return err ? reject(err) : resolve(result);\n        });\n\n        return method.apply(null, args);\n    });\n}\n\n\nexport function patchPromise() {\n    window.Promise = SyncPromise;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/sync-browser-mocks/src/promise.js","\nimport { util } from './util';\n\nlet tickMessageName = `__nextTick__postRobot__${util.uniqueID()}`;\nlet queue = [];\n\nwindow.addEventListener('message', event => {\n    if (event.data === tickMessageName) {\n        let method = queue.shift();\n        method.call();\n    }\n});\n\nexport function nextTick(method) {\n\n    queue.push(method);\n    window.postMessage(tickMessageName, '*');\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/tick.js","\nimport { CONSTANTS } from '../conf';\n\nexport let util = {\n\n    once(method) {\n        if (!method) {\n            return method;\n        }\n        let called = false;\n        return function onceWrapper() {\n            if (!called) {\n                called = true;\n                return method.apply(this, arguments);\n            }\n        };\n    },\n\n    noop() {}, // eslint-disable-line no-empty-function\n\n    safeHasProp(obj, name) {\n        try {\n            if (obj[name]) {\n                return true;\n            } else {\n                return false;\n            }\n        } catch (err) {\n            return false;\n        }\n    },\n\n    safeGetProp(obj, name) {\n        try {\n            return obj[name];\n        } catch (err) {\n            return;\n        }\n    },\n\n    listen(win, event, handler) {\n        if (win.addEventListener) {\n            win.addEventListener(event, handler);\n        } else {\n            win.attachEvent(`on${event}`, handler);\n        }\n\n        return {\n            cancel() {\n                if (win.removeEventListener) {\n                    win.removeEventListener(event, handler);\n                } else {\n                    win.detachEvent(`on${event}`, handler);\n                }\n            }\n        };\n    },\n\n    apply(method, context, args) {\n        if (typeof method.apply === 'function') {\n            return method.apply(context, args);\n        }\n        return method(args[0], args[1], args[2], args[3], args[4], args[5], args[6], args[7], args[8], args[9]);\n    },\n\n    find(collection, method, def) {\n        if (!collection) {\n            return def;\n        }\n        for (let i = 0; i < collection.length; i++) {\n            if (method(collection[i])) {\n                return collection[i];\n            }\n        }\n        return def;\n    },\n\n    map(collection, method) {\n        let results = [];\n        for (let i = 0; i < collection.length; i++) {\n            results.push(method(collection[i]));\n        }\n        return results;\n    },\n\n    some(collection, method) {\n        method = method || Boolean;\n        for (let i = 0; i < collection.length; i++) {\n            if (method(collection[i])) {\n                return true;\n            }\n        }\n        return false;\n    },\n\n    keys(mapping) {\n        let result = [];\n        for (let key in mapping) {\n            if (mapping.hasOwnProperty(key)) {\n                result.push(key);\n            }\n        }\n        return result;\n    },\n\n    values(mapping) {\n        let result = [];\n        for (let key in mapping) {\n            if (mapping.hasOwnProperty(key)) {\n                result.push(mapping[key]);\n            }\n        }\n        return result;\n    },\n\n    getByValue(mapping, value) {\n        for (let key in mapping) {\n            if (mapping.hasOwnProperty(key) && mapping[key] === value) {\n                return key;\n            }\n        }\n    },\n\n    uniqueID() {\n\n        let chars = '0123456789abcdef';\n\n        return 'xxxxxxxxxx'.replace(/./g, () => {\n            return chars.charAt(Math.floor(Math.random() * chars.length));\n        });\n    },\n\n    memoize(method) {\n\n        let results = {};\n\n        return function memoized() {\n            let args = JSON.stringify(Array.prototype.slice.call(arguments));\n            if (!results.hasOwnProperty(args)) {\n                results[args] = method.apply(this, arguments);\n            }\n            return results[args];\n        };\n    },\n\n    extend(obj, source) {\n        if (!source) {\n            return obj;\n        }\n\n        for (let key in source) {\n            if (source.hasOwnProperty(key)) {\n                obj[key] = source[key];\n            }\n        }\n\n        return obj;\n    },\n\n    each(obj, callback) {\n        if (Array.isArray(obj)) {\n            for (let i = 0; i < obj.length; i++) {\n                callback(obj[i], i);\n            }\n        } else if (typeof obj === 'object' && obj !== null) {\n            for (let key in obj) {\n                if (obj.hasOwnProperty(key)) {\n                    callback(obj[key], key);\n                }\n            }\n        }\n    },\n\n    replaceObject(obj, callback, depth = 1) {\n\n        if (depth >= 100) {\n            throw new Error(`Self-referential object passed, or object contained too many layers`);\n        }\n\n        let newobj = Array.isArray(obj) ? [] : {};\n\n        util.each(obj, (item, key) => {\n\n            let result = callback(item, key);\n\n            if (result !== undefined) {\n                newobj[key] = result;\n            } else if (typeof item === 'object' && item !== null) {\n                newobj[key] = util.replaceObject(item, callback, depth + 1);\n            } else {\n                newobj[key] = item;\n            }\n        });\n\n        return newobj;\n    },\n\n    safeInterval(method, time) {\n        let timeout;\n\n        function runInterval() {\n            timeout = setTimeout(runInterval, time);\n            method.call();\n        }\n\n        timeout = setTimeout(runInterval, time);\n\n        return {\n            cancel() {\n                clearTimeout(timeout);\n            }\n        };\n    },\n\n    intervalTimeout(time, interval, method) {\n\n        let safeInterval = util.safeInterval(() => {\n            time -= interval;\n\n            time = time <= 0 ? 0 : time;\n\n            if (time === 0) {\n                safeInterval.cancel();\n            }\n\n            method(time);\n        }, interval);\n\n        return safeInterval;\n    },\n\n    getDomain(win) {\n\n        win = win || window;\n\n        if (win.mockDomain && win.mockDomain.indexOf(CONSTANTS.MOCK_PROTOCOL) === 0) {\n            return win.mockDomain;\n        }\n\n        if (!win.location.protocol) {\n            throw new Error(`Can not read window protocol`);\n        }\n\n        if (win.location.protocol === CONSTANTS.FILE_PROTOCOL) {\n            return `${win.location.protocol}//${win.location.host}`;\n        }\n\n        if (!win.location.host) {\n            throw new Error(`Can not read window host`);\n        }\n\n        return `${win.location.protocol}//${win.location.host}`;\n    },\n\n    getDomainFromUrl(url) {\n\n        let domain;\n\n        if (url.match(/^(https?|mock|file):\\/\\//)) {\n            domain = url;\n        } else {\n            return this.getDomain();\n        }\n\n        domain = domain.split('/').slice(0, 3).join('/');\n\n        return domain;\n    },\n\n    safeGet(obj, prop) {\n\n        let result;\n\n        try {\n            result = obj[prop];\n        } catch (err) {\n            // pass\n        }\n\n        return result;\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/lib/util.js","\nimport { util } from './util';\nimport { getWindowType, jsonStringify } from './windows';\nimport { CONFIG } from '../conf';\n\nconst LOG_LEVELS = ['debug', 'info', 'warn', 'error'];\n\nif (Function.prototype.bind && window.console && typeof console.log === 'object') {\n    [ 'log', 'info', 'warn', 'error' ].forEach(function(method) {\n        console[method] = this.bind(console[method], console);\n    }, Function.prototype.call);\n}\n\nexport let log = {\n\n    clearLogs() {\n\n        if (window.console && window.console.clear) {\n            window.console.clear();\n        }\n\n        if (CONFIG.LOG_TO_PAGE) {\n            let container = document.getElementById('postRobotLogs');\n\n            if (container) {\n                container.parentNode.removeChild(container);\n            }\n        }\n    },\n\n    writeToPage(level, args) {\n        setTimeout(() => {\n            let container = document.getElementById('postRobotLogs');\n\n            if (!container) {\n                container = document.createElement('div');\n                container.id = 'postRobotLogs';\n                container.style.cssText = 'width: 800px; font-family: monospace; white-space: pre-wrap;';\n                document.body.appendChild(container);\n            }\n\n            let el = document.createElement('div');\n\n            let date = (new Date()).toString().split(' ')[4];\n\n            let payload = util.map(args, item => {\n                if (typeof item === 'string') {\n                    return item;\n                }\n                if (!item) {\n                    return Object.prototype.toString.call(item);\n                }\n                let json;\n                try {\n                    json = jsonStringify(item, 0, 2);\n                } catch (e) {\n                    json = '[object]';\n                }\n\n                return `\\n\\n${json}\\n\\n`;\n            }).join(' ');\n\n\n            let msg = `${date} ${level} ${payload}`;\n            el.innerHTML = msg;\n\n            let color = {\n                log: '#ddd',\n                warn: 'orange',\n                error: 'red',\n                info: 'blue',\n                debug: '#aaa'\n            }[level];\n\n            el.style.cssText = `margin-top: 10px; color: ${color};`;\n\n            if (!container.childNodes.length) {\n                container.appendChild(el);\n            } else {\n                container.insertBefore(el, container.childNodes[0]);\n            }\n\n        });\n    },\n\n    logLevel(level, args) {\n        setTimeout(() => {\n            try {\n                if (LOG_LEVELS.indexOf(level) < LOG_LEVELS.indexOf(CONFIG.LOG_LEVEL)) {\n                    return;\n                }\n\n                args = Array.prototype.slice.call(args);\n\n                args.unshift(`${window.location.host}${window.location.pathname}`);\n                args.unshift(`::`);\n                args.unshift(`${getWindowType().toLowerCase()}`);\n                args.unshift('[post-robot]');\n\n                if (CONFIG.LOG_TO_PAGE) {\n                    log.writeToPage(level, args);\n                }\n\n                if (!window.console) {\n                    return;\n                }\n\n                if (!window.console[level]) {\n                    level = 'log';\n                }\n\n                if (!window.console[level]) {\n                    return;\n                }\n\n                window.console[level].apply(window.console, args);\n\n            } catch (err) {\n                // pass\n            }\n        }, 1);\n    },\n\n    debug() {\n        log.logLevel('debug', arguments);\n    },\n\n    info() {\n        log.logLevel('info', arguments);\n    },\n\n    warn() {\n        log.logLevel('warn', arguments);\n    },\n\n    error() {\n        log.logLevel('error', arguments);\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/lib/log.js","\nimport { util } from './util';\nimport { global } from '../global';\nimport { CONSTANTS } from '../conf';\n\nglobal.domainMatches = global.domainMatches || [];\n\nlet domainMatchTimeout;\n\nexport function isSameDomain(win) {\n\n    for (let match of global.domainMatches) {\n        if (match.win === win) {\n            return match.match;\n        }\n    }\n\n    let match;\n\n    try {\n        if (util.getDomain(window) === util.getDomain(win)) {\n            match = true;\n        } else {\n            match = false;\n        }\n    } catch (err) {\n        match = false;\n    }\n\n    global.clean.push(global.domainMatches, { win, match });\n\n    if (!domainMatchTimeout) {\n        domainMatchTimeout = setTimeout(() => {\n            global.domainMatches = [];\n            domainMatchTimeout = null;\n        }, 1);\n    }\n\n    return match;\n}\n\n\nexport function getOpener(win) {\n\n    if (!win) {\n        return;\n    }\n\n    try {\n        return win.opener;\n    } catch (err) {\n        return;\n    }\n}\n\nexport function getParent(win) {\n\n    if (!win) {\n        return;\n    }\n\n    try {\n        if (win.parent && win.parent !== win) {\n            return win.parent;\n        }\n    } catch (err) {\n        return;\n    }\n}\n\n\n\nexport function getParents(win) {\n\n    let result = [];\n\n    try {\n\n        while (win.parent !== win) {\n            result.push(win.parent);\n            win = win.parent;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    return result;\n}\n\nexport function isAncestorParent(parent, child) {\n\n    if (!parent || !child) {\n        return false;\n    }\n\n    let childParent = getParent(child);\n\n    if (childParent) {\n        return childParent === parent;\n    }\n\n    if (getParents(child).indexOf(parent) !== -1) {\n        return true;\n    }\n\n    return false;\n}\n\nexport function getFrames(win) {\n\n    let result = [];\n\n    let frames;\n\n    try {\n        frames = win.frames;\n    } catch (err) {\n        frames = win;\n    }\n\n    let len;\n\n    try {\n        len = frames.length;\n    } catch (err) {\n        // pass\n    }\n\n    if (len === 0) {\n        return result;\n    }\n\n    if (len) {\n        for (let i = 0; i < len; i++) {\n\n            let frame;\n\n            try {\n                frame = frames[i];\n            } catch (err) {\n                continue;\n            }\n\n            result.push(frame);\n        }\n\n        return result;\n    }\n\n    for (let i = 0; i < 100; i++) {\n        let frame;\n\n        try {\n            frame = frames[i];\n        } catch (err) {\n            return result;\n        }\n\n        if (!frame) {\n            return result;\n        }\n\n        result.push(frame);\n    }\n\n    return result;\n}\n\n\nexport function getAllChildFrames(win) {\n\n    let result = [];\n\n    for (let frame of getFrames(win)) {\n        result.push(frame);\n\n        for (let childFrame of getAllChildFrames(frame)) {\n            result.push(childFrame);\n        }\n    }\n\n    return result;\n}\n\nexport function getAllFramesInWindow(win) {\n\n    let result = getAllChildFrames(win);\n\n    result.push(win);\n\n    for (let parent of getParents(win)) {\n\n        result.push(parent);\n\n        for (let frame of getFrames(parent)) {\n\n            if (result.indexOf(frame) === -1) {\n                result.push(frame);\n            }\n        }\n    }\n\n    return result;\n}\n\nexport function getTop(win) {\n\n    if (!win) {\n        return;\n    }\n\n    try {\n        if (win.top) {\n            return win.top;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    if (getParent(win) === win) {\n        return win;\n    }\n\n    try {\n        if (isAncestorParent(window, win)) {\n            return window.top;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        if (isAncestorParent(win, window)) {\n            return window.top;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    for (let frame of getAllChildFrames(win)) {\n        try {\n            if (frame.top) {\n                return frame.top;\n            }\n        } catch (err) {\n            // pass\n        }\n\n        if (getParent(frame) === frame) {\n            return frame;\n        }\n    }\n}\n\n\nexport function isWindowClosed(win, allowMock = true) {\n\n    try {\n        if (win === window) {\n            return false;\n        }\n    } catch (err) {\n        return true;\n    }\n\n\n    try {\n        if (!win) {\n            return true;\n        }\n\n    } catch (err) {\n        return true;\n    }\n\n    try {\n        if (win.closed) {\n            return true;\n        }\n\n    } catch (err) {\n\n        // I love you so much IE\n\n        if (err && err.message === 'Call was rejected by callee.\\r\\n') {\n            return false;\n        }\n\n        return true;\n    }\n\n\n    if (allowMock && isSameDomain(win) && util.safeGet(win, 'mockclosed')) {\n        return true;\n    }\n\n    /*\n\n    // IE9... don't even ask. If an iframe is removed from the parent page, .closed does not get set to true\n\n    try {\n        if (win.parent === win && !getOpener(win) && win !== getTop(window)) {\n            // return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    */\n\n\n    return false;\n}\n\nexport function getUserAgent(win) {\n    win = win || window;\n    return win.navigator.mockUserAgent || win.navigator.userAgent;\n}\n\n\nexport function getFrameByName(win, name) {\n\n    let winFrames = getFrames(win);\n\n    for (let childFrame of winFrames) {\n        try {\n            if (isSameDomain(childFrame) && childFrame.name === name && winFrames.indexOf(childFrame) !== -1) {\n                return childFrame;\n            }\n        } catch (err) {\n            // pass\n        }\n    }\n\n    try {\n        if (winFrames.indexOf(win.frames[name]) !== -1) {\n            return win.frames[name];\n        }\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        if (winFrames.indexOf(win[name]) !== -1) {\n            return win[name];\n        }\n    } catch (err) {\n        // pass\n    }\n}\n\nexport function findChildFrameByName(win, name) {\n\n    let frame = getFrameByName(win, name);\n\n    if (frame) {\n        return frame;\n    }\n\n    for (let childFrame of getFrames(win)) {\n        let namedFrame = findChildFrameByName(childFrame, name);\n\n        if (namedFrame) {\n            return namedFrame;\n        }\n    }\n}\n\nexport function findFrameByName(win, name) {\n\n    let frame;\n\n    frame = getFrameByName(win, name);\n\n    if (frame) {\n        return frame;\n    }\n\n    return findChildFrameByName(getTop(win), name);\n}\n\nexport function isParent(win, frame) {\n\n    let frameParent = getParent(frame);\n\n    if (frameParent) {\n        return frameParent === win;\n    }\n\n    for (let childFrame of getFrames(win)) {\n        if (childFrame === frame) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport function isOpener(parent, child) {\n\n    return parent === getOpener(child);\n}\n\nexport function getAncestor(win) {\n    win = win || window;\n\n    let opener = getOpener(win);\n\n    if (opener) {\n        return opener;\n    }\n\n    let parent = getParent(win);\n\n    if (parent) {\n        return parent;\n    }\n}\n\nexport function getAncestors(win) {\n\n    let results = [];\n\n    let ancestor = win;\n\n    while (ancestor) {\n        ancestor = getAncestor(ancestor);\n        if (ancestor) {\n            results.push(ancestor);\n        }\n    }\n\n    return results;\n}\n\n\nexport function isAncestor(parent, child) {\n\n    let actualParent = getAncestor(child);\n\n    if (actualParent) {\n        if (actualParent === parent) {\n            return true;\n        }\n\n        return false;\n    }\n\n    if (child === parent) {\n        return false;\n    }\n\n    if (getTop(child) === child) {\n        return false;\n    }\n\n    for (let frame of getFrames(parent)) {\n        if (frame === child) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport function isPopup() {\n    return Boolean(getOpener(window));\n}\n\nexport function isIframe() {\n    return Boolean(getParent(window));\n}\n\nexport function isFullpage() {\n    return Boolean(!isIframe() && !isPopup());\n}\n\nexport function getWindowType() {\n    if (isPopup()) {\n        return CONSTANTS.WINDOW_TYPES.POPUP;\n    }\n    if (isIframe()) {\n        return CONSTANTS.WINDOW_TYPES.IFRAME;\n    }\n    return CONSTANTS.WINDOW_TYPES.FULLPAGE;\n}\n\n\nfunction anyMatch(collection1, collection2) {\n\n    for (let item1 of collection1) {\n        for (let item2 of collection2) {\n            if (item1 === item2) {\n                return true;\n            }\n        }\n    }\n}\n\nexport function isSameTopWindow(win1, win2) {\n\n    let top1 = getTop(win1);\n    let top2 = getTop(win2);\n\n    try {\n        if (top1 && top2) {\n            if (top1 === top2) {\n                return true;\n            }\n\n            return false;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    let allFrames1 = getAllFramesInWindow(win1);\n    let allFrames2 = getAllFramesInWindow(win2);\n\n    if (anyMatch(allFrames1, allFrames2)) {\n        return true;\n    }\n\n    let opener1 = getOpener(top1);\n    let opener2 = getOpener(top2);\n\n    if (opener1 && anyMatch(getAllFramesInWindow(opener1), allFrames2)) {\n        return false;\n    }\n\n    if (opener2 && anyMatch(getAllFramesInWindow(opener2), allFrames1)) {\n        return false;\n    }\n}\n\nexport function jsonStringify() {\n\n    let objectToJSON;\n    let arrayToJSON;\n\n    try {\n        if (JSON.stringify({}) !== '{}') {\n            objectToJSON = Object.prototype.toJSON;\n            delete Object.prototype.toJSON;\n        }\n\n        if (JSON.stringify({}) !== '{}') {\n            throw new Error(`Can not correctly serialize JSON objects`);\n        }\n\n        if (JSON.stringify([]) !== '[]') {\n            arrayToJSON  = Array.prototype.toJSON;\n            delete Array.prototype.toJSON;\n        }\n\n        if (JSON.stringify([]) !== '[]') {\n            throw new Error(`Can not correctly serialize JSON objects`);\n        }\n\n    } catch (err) {\n        throw new Error(`Can not repair JSON.stringify: ${err.message}`);\n    }\n\n    let result = JSON.stringify.apply(this, arguments);\n\n    try {\n        if (objectToJSON) {\n            Object.prototype.toJSON = objectToJSON; // eslint-disable-line\n        }\n\n        if (arrayToJSON) {\n            Array.prototype.toJSON = arrayToJSON; // eslint-disable-line\n        }\n\n    } catch (err) {\n        throw new Error(`Can not repair JSON.stringify: ${err.message}`);\n    }\n\n\n    return result;\n}\n\nexport function jsonParse() {\n    return JSON.parse.apply(this, arguments);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/windows.js","\nimport { CONSTANTS } from './conf';\nimport { cleanup } from './lib/cleanup';\n\nexport let global = window[CONSTANTS.WINDOW_PROPS.POSTROBOT] = window[CONSTANTS.WINDOW_PROPS.POSTROBOT] || {};\n\nglobal.clean = global.clean || cleanup(global);\n\n// Backwards compatibility\n\nglobal.registerSelf = () => {\n    // pass\n};\n\n\n// WEBPACK FOOTER //\n// ./src/global.js","\nimport { SyncPromise as Promise } from 'sync-browser-mocks/src/promise';\n\nexport function cleanup(obj) {\n\n    let tasks = [];\n\n    return {\n\n        getters: {\n            array:  () => { return []; },\n            object: () => { return {}; }\n        },\n\n        set(name, item) {\n            obj[name] = item;\n            this.register(() => {\n                delete obj[name];\n            });\n            return item;\n        },\n\n        push(collection, item) {\n            collection.push(item);\n            this.register(() => {\n                let index = collection.indexOf(item);\n                if (index !== -1) {\n                    collection.splice(index, 1);\n                }\n            });\n            return item;\n        },\n\n        setItem(mapping, key, item) {\n            mapping[key] = item;\n            this.register(() => {\n                delete mapping[key];\n            });\n            return item;\n        },\n\n        register(name, method) {\n\n            if (!method) {\n                method = name;\n                name = undefined;\n            }\n\n            tasks.push({\n                complete: false,\n\n                name,\n\n                run() {\n\n                    if (this.complete) {\n                        return;\n                    }\n\n                    this.complete = true;\n\n                    return method();\n                }\n            });\n        },\n\n        hasTasks() {\n            return Boolean(tasks.filter(item => !item.complete).length);\n        },\n\n        all() {\n            let results = [];\n\n            while (tasks.length) {\n                results.push(tasks.pop().run());\n            }\n\n            return Promise.all(results).then(() => {\n                return;\n            });\n        },\n\n        run(name) {\n            let results = [];\n            let toClean = [];\n\n            for (let item of tasks) {\n                if (item.name === name) {\n                    toClean.push(item);\n                    results.push(item.run());\n                }\n            }\n\n            for (let item of toClean) {\n                tasks.splice(tasks.indexOf(item), 1);\n            }\n\n            return Promise.all(results).then(() => {\n                return;\n            });\n        }\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/cleanup.js","\nimport { CONSTANTS } from '../conf';\nimport { util } from './util';\nimport { on, send } from '../interface';\nimport { log } from './log';\nimport { promise } from './promise';\nimport { global } from '../global';\n\nglobal.methods = global.methods || {};\n\nexport let listenForMethods = util.once(() => {\n    on(CONSTANTS.POST_MESSAGE_NAMES.METHOD, { window: '*', origin: '*' }, ({ source, origin, data }) => {\n\n        let meth = global.methods[data.id];\n\n        if (!meth) {\n            throw new Error(`Could not find method with id: ${data.id}`);\n        }\n\n        if (meth.destination !== source) {\n            throw new Error(`Method window does not match`);\n        }\n\n        if (meth.domain && meth.domain !== '*' && origin !== meth.domain) {\n            throw new Error(`Method domain ${meth.domain} does not match origin ${origin}`);\n        }\n\n        log.debug('Call local method', data.name, data.args);\n\n        return promise.run(() => {\n            return meth.method.apply({ source, origin, data }, data.args);\n\n        }).then(result => {\n\n            return {\n                result,\n                id: data.id,\n                name: data.name\n            };\n        });\n    });\n});\n\nfunction isSerialized(item, type) {\n    return typeof item === 'object' && item !== null && item.__type__ === type;\n}\n\nexport function serializeMethod(destination, domain, method, name) {\n\n    let id = util.uniqueID();\n\n    global.clean.setItem(global.methods, id, { destination, domain, method });\n\n    return {\n        __type__: CONSTANTS.SERIALIZATION_TYPES.METHOD,\n        __id__: id,\n        __name__: name\n    };\n}\n\nfunction serializeError(err) {\n    return {\n        __type__: CONSTANTS.SERIALIZATION_TYPES.ERROR,\n        __message__: err.stack || err.message || err.toString()\n    };\n}\n\nexport function serializeMethods(destination, domain, obj) {\n\n    return util.replaceObject({ obj }, (item, key) => {\n        if (typeof item === 'function') {\n            return serializeMethod(destination, domain, item, key);\n        }\n\n        if (item instanceof Error) {\n            return serializeError(item);\n        }\n    }).obj;\n}\n\nexport function deserializeMethod(source, origin, obj) {\n\n    function wrapper() {\n        let args = Array.prototype.slice.call(arguments);\n        log.debug('Call foreign method', obj.__name__, args);\n        return send(source, CONSTANTS.POST_MESSAGE_NAMES.METHOD, {\n            id: obj.__id__,\n            name: obj.__name__,\n            args\n\n        }, { domain: origin }).then(({ data }) => {\n\n            log.debug('Got foreign method result', obj.__name__, data.result);\n            return data.result;\n        }, err => {\n            log.debug('Got foreign method error', err.stack || err.toString());\n            throw err;\n        });\n    }\n\n    wrapper.__name__ = obj.__name__;\n    wrapper.source = source;\n    wrapper.origin = origin;\n\n    return wrapper;\n}\n\nexport function deserializeError(source, origin, obj) {\n    return new Error(obj.__message__);\n}\n\nexport function deserializeMethods(source, origin, obj) {\n\n    return util.replaceObject({ obj }, (item, key) => {\n\n        if (isSerialized(item, CONSTANTS.SERIALIZATION_TYPES.METHOD)) {\n            return deserializeMethod(source, origin, item);\n        }\n\n        if (isSerialized(item, CONSTANTS.SERIALIZATION_TYPES.ERROR)) {\n            return deserializeError(source, origin, item);\n        }\n\n    }).obj;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/methods.js","\nimport { CONSTANTS } from '../conf';\nimport { getAncestor } from './windows';\nimport { on, send } from '../interface';\nimport { log } from './log';\nimport { SyncPromise as Promise } from 'sync-browser-mocks/src/promise';\nimport { global } from '../global';\n\nglobal.readyPromises = global.readyPromises || [];\n\nexport function initOnReady() {\n\n    on(CONSTANTS.POST_MESSAGE_NAMES.READY, { window: '*', domain: '*' }, event => {\n\n        for (let item of global.readyPromises) {\n            if (item.win === event.source) {\n                item.promise.resolve(event);\n                return;\n            }\n        }\n\n        global.clean.push(global.readyPromises, {\n            win: event.source,\n            promise: new Promise().resolve(event)\n        });\n    });\n\n    let parent = getAncestor();\n\n    if (parent) {\n        send(parent, CONSTANTS.POST_MESSAGE_NAMES.READY, {}, { domain: '*' }).catch(err => {\n            log.debug(err.stack || err.toString());\n        });\n    }\n}\n\nexport function onWindowReady(win, timeout = 5000, name = 'Window') {\n\n    for (let item of global.readyPromises) {\n        if (item.win === win) {\n            return item.promise;\n        }\n    }\n\n    let promise = new Promise();\n\n    global.clean.push(global.readyPromises, { win, promise });\n\n    setTimeout(() => promise.reject(new Error(`${name} did not load after ${timeout}ms`)), timeout);\n\n    return promise;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/ready.js","\nexport * from './ie';\n\n\n// WEBPACK FOOTER //\n// ./src/compat/index.js","\nimport { CONFIG } from '../conf';\nimport { isSameTopWindow } from '../lib';\n\nexport function emulateIERestrictions(sourceWindow, targetWindow) {\n    if (!CONFIG.ALLOW_POSTMESSAGE_POPUP) {\n\n        if (isSameTopWindow(sourceWindow, targetWindow) === false) {\n            throw new Error(`Can not send and receive post messages between two different windows (disabled to emulate IE)`);\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/compat/ie.js","\nimport { CONSTANTS } from '../../conf';\nimport { promise, log, isWindowClosed } from '../../lib';\n\nimport { sendMessage } from '../send';\nimport { listeners, getRequestListener } from '../listeners';\n\nfunction matchDomain(domain, origin) {\n\n    if (typeof domain === 'string') {\n        return domain === '*' || origin === domain;\n    }\n\n    if (Object.prototype.toString.call(domain) === '[object RegExp]') {\n        return origin.match(domain);\n    }\n\n    if (Array.isArray(domain)) {\n        return domain.indexOf(origin) !== -1;\n    }\n\n    return false;\n}\n\nexport let RECEIVE_MESSAGE_TYPES = {\n\n    [ CONSTANTS.POST_MESSAGE_TYPE.ACK ]: (source, origin, message) => {\n\n        let options = listeners.response[message.hash];\n\n        if (!options) {\n            throw new Error(`No handler found for post message ack for message: ${message.name} from ${origin} in ${window.location.protocol}//${window.location.host}${window.location.pathname}`);\n        }\n\n        if (!matchDomain(options.domain, origin)) {\n            throw new Error(`Ack origin ${origin} does not match domain ${options.domain}`);\n        }\n\n        options.ack = true;\n    },\n\n    [ CONSTANTS.POST_MESSAGE_TYPE.REQUEST ]: (source, origin, message) => {\n\n        let options = getRequestListener(message.name, source, origin);\n\n        function respond(data) {\n\n            if (message.fireAndForget || isWindowClosed(source)) {\n                return promise.Promise.resolve();\n            }\n\n            return sendMessage(source, {\n                target: message.originalSource,\n                hash: message.hash,\n                name: message.name,\n                ...data\n            }, origin);\n        }\n\n        return promise.Promise.all([\n\n            respond({\n                type: CONSTANTS.POST_MESSAGE_TYPE.ACK\n            }),\n\n            promise.run(() => {\n\n                if (!options) {\n                    throw new Error(`No handler found for post message: ${message.name} from ${origin} in ${window.location.protocol}//${window.location.host}${window.location.pathname}`);\n                }\n\n                if (!matchDomain(options.domain, origin)) {\n                    throw new Error(`Request origin ${origin} does not match domain ${options.domain}`);\n                }\n\n                let data = message.data;\n\n                return promise.deNodeify(options.handler, { source, origin, data });\n\n            }).then(data => {\n\n                return respond({\n                    type: CONSTANTS.POST_MESSAGE_TYPE.RESPONSE,\n                    ack: CONSTANTS.POST_MESSAGE_ACK.SUCCESS,\n                    data\n                });\n\n            }, err => {\n\n                return respond({\n                    type: CONSTANTS.POST_MESSAGE_TYPE.RESPONSE,\n                    ack: CONSTANTS.POST_MESSAGE_ACK.ERROR,\n                    error: err.stack ? `${err.message}\\n${err.stack}` : err.toString()\n                });\n            })\n\n        ]).catch(err => {\n\n            if (options && options.handleError) {\n                return options.handleError(err);\n            } else {\n                log.error(err.stack || err.toString());\n            }\n        });\n    },\n\n    [ CONSTANTS.POST_MESSAGE_TYPE.RESPONSE ]: (source, origin, message) => {\n\n        let options = listeners.response[message.hash];\n\n        if (!options) {\n            throw new Error(`No handler found for post message response for message: ${message.name} from ${origin} in ${window.location.protocol}//${window.location.host}${window.location.pathname}`);\n        }\n\n        if (!matchDomain(options.domain, origin)) {\n            throw new Error(`Response origin ${origin} does not match domain ${options.domain}`);\n        }\n\n        delete listeners.response[message.hash];\n\n        if (message.ack === CONSTANTS.POST_MESSAGE_ACK.ERROR) {\n            return options.respond(new Error(message.error));\n        } else if (message.ack === CONSTANTS.POST_MESSAGE_ACK.SUCCESS) {\n            let data = message.data || message.response;\n\n            return options.respond(null, { source, origin, data });\n        }\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/drivers/receive/types.js","\nimport { CONSTANTS, CONFIG, POST_MESSAGE_NAMES_LIST } from '../../conf';\nimport { util, promise, serializeMethods, log, isWindowClosed, getWindowType, jsonStringify } from '../../lib';\n\nimport { SEND_MESSAGE_STRATEGIES } from './strategies';\n\n\nexport function buildMessage(win, message, options = {}) {\n\n    let id   = util.uniqueID();\n    let type = getWindowType();\n    let sourceDomain = util.getDomain(window);\n\n    return {\n        ...message,\n        ...options,\n        sourceDomain,\n        id:         message.id || id,\n        windowType: type\n    };\n}\n\n\nexport function sendMessage(win, message, domain) {\n    return promise.run(() => {\n\n        message = buildMessage(win, message, {\n            data: serializeMethods(win, domain, message.data),\n            domain\n        });\n\n        let level;\n\n        if (POST_MESSAGE_NAMES_LIST.indexOf(message.name) !== -1 || message.type === CONSTANTS.POST_MESSAGE_TYPE.ACK) {\n            level = 'debug';\n        } else if (message.ack === 'error') {\n            level = 'error';\n        } else {\n            level = 'info';\n        }\n\n        log.logLevel(level, [ '\\n\\n\\t', '#send', message.type.replace(/^postrobot_message_/, ''), '::', message.name, '::', domain || '*', '\\n\\n', message ]);\n\n        if (CONFIG.MOCK_MODE) {\n            delete message.target;\n            return window[CONSTANTS.WINDOW_PROPS.POSTROBOT].postMessage({\n                origin: util.getDomain(window),\n                source: window,\n                data: jsonStringify(message, 0, 2)\n            });\n        }\n\n        if (win === window) {\n            throw new Error('Attemping to send message to self');\n        }\n\n        if (isWindowClosed(win)) {\n            throw new Error('Window is closed');\n        }\n\n        log.debug('Running send message strategies', message);\n\n        let messages = [];\n\n        let serializedMessage = jsonStringify({\n            [ CONSTANTS.WINDOW_PROPS.POSTROBOT ]: message\n        }, 0, 2);\n\n        return promise.map(Object.keys(SEND_MESSAGE_STRATEGIES), strategyName => {\n\n            return promise.run(() => {\n\n                if (!CONFIG.ALLOWED_POST_MESSAGE_METHODS[strategyName]) {\n                    throw new Error(`Strategy disallowed: ${strategyName}`);\n                }\n\n                return SEND_MESSAGE_STRATEGIES[strategyName](win, serializedMessage, domain);\n\n            }).then(() => {\n                messages.push(`${strategyName}: success`);\n                return true;\n            }, err => {\n                messages.push(`${strategyName}: ${err.stack || err.toString()}\\n`);\n                return false;\n            });\n\n        }).then(results => {\n\n            let success = util.some(results);\n            let status = `${message.type} ${message.name} ${success ? 'success' : 'error'}:\\n  - ${messages.join('\\n  - ')}\\n`;\n\n            log.debug(status);\n\n            if (!success) {\n                throw new Error(status);\n            }\n        });\n    });\n}\n\n\n// WEBPACK FOOTER //\n// ./src/drivers/send/index.js","\nimport { CONSTANTS } from '../../conf';\nimport { isSameDomain, isSameTopWindow } from '../../lib';\nimport { emulateIERestrictions } from '../../compat';\nimport { sendBridgeMessage } from '../../bridge';\n\nexport let SEND_MESSAGE_STRATEGIES = {\n\n    [ CONSTANTS.SEND_STRATEGIES.POST_MESSAGE ](win, serializedMessage, domain) {\n\n        emulateIERestrictions(window, win);\n\n        if (domain && domain.indexOf(CONSTANTS.MOCK_PROTOCOL) === 0) {\n            domain = `${win.location.protocol}//${win.location.host}`;\n        }\n\n        if (domain && domain.indexOf(CONSTANTS.FILE_PROTOCOL) === 0) {\n            domain = `*`;\n        }\n\n        return win.postMessage(serializedMessage, domain);\n    },\n\n    [ CONSTANTS.SEND_STRATEGIES.BRIDGE ](win, serializedMessage, domain) {\n\n        if (isSameDomain(win)) {\n            throw new Error(`Post message through bridge disabled between same domain windows`);\n        }\n\n        if (isSameTopWindow(window, win) !== false) {\n            throw new Error(`Can only use bridge to communicate between two different windows, not between frames`);\n        }\n\n        return sendBridgeMessage(win, serializedMessage, domain);\n    },\n\n    [ CONSTANTS.SEND_STRATEGIES.GLOBAL ](win, serializedMessage, domain) {\n\n        if (!isSameDomain(win)) {\n            throw new Error(`Post message through global disabled between different domain windows`);\n        }\n\n        if (isSameTopWindow(window, win) !== false) {\n            throw new Error(`Can only use global to communicate between two different windows, not between frames`);\n        }\n\n        let foreignGlobal = win[CONSTANTS.WINDOW_PROPS.POSTROBOT];\n        \n        if (!foreignGlobal) {\n            throw new Error(`Can not find postRobot global on foreign window`);\n        }\n\n        return foreignGlobal.receiveMessage({\n            source: window,\n            origin: domain,\n            data: serializedMessage\n        });\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/drivers/send/strategies.js","\nexport * from './bridge';\nexport * from './child';\nexport * from './common';\nexport * from './parent';\n\n\n\n// WEBPACK FOOTER //\n// ./src/bridge/index.js","\nimport { CONSTANTS } from '../conf';\nimport { getParent, isWindowClosed } from '../lib';\nimport { global } from '../global';\nimport { send } from '../interface';\n\nglobal.openTunnelToParent = function openTunnelToParent({ name, source, canary, sendMessage }) {\n\n    let remoteWindow = getParent(window);\n\n    if (!remoteWindow) {\n        throw new Error(`No parent window found to open tunnel to`);\n    }\n\n    return send(remoteWindow, CONSTANTS.POST_MESSAGE_NAMES.OPEN_TUNNEL, {\n        name,\n        sendMessage() {\n\n            if (isWindowClosed(source)) {\n                return;\n            }\n\n            try {\n                canary();\n            } catch (err) {\n                return;\n            }\n\n            sendMessage.apply(this, arguments);\n        }\n    }, { domain: '*' });\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/bridge/bridge.js","\nimport { SyncPromise as Promise } from 'sync-browser-mocks/src/promise';\nimport { CONSTANTS } from '../conf';\nimport { isSameDomain, getOpener, getFrames, util, getFrameByName } from '../lib';\nimport { receiveMessage } from '../drivers';\n\nimport { needsBridge, registerRemoteWindow, rejectRemoteSendMessage, registerRemoteSendMessage, getBridgeName } from './common';\n\nfunction getRemoteBridgeForWindow(win) {\n    return Promise.try(() => {\n        for (let frame of getFrames(win)) {\n            try {\n                if (frame && frame !== window && isSameDomain(frame) && frame[CONSTANTS.WINDOW_PROPS.POSTROBOT]) {\n                    return frame;\n                }\n\n            } catch (err) {\n                continue;\n            }\n        }\n\n        try {\n            let frame = getFrameByName(win, getBridgeName(util.getDomain()));\n\n            if (!frame) {\n                return;\n            }\n\n            if (isSameDomain(frame) && frame[CONSTANTS.WINDOW_PROPS.POSTROBOT]) {\n                return frame;\n            }\n\n            return new Promise(resolve => {\n\n                let interval;\n                let timeout;\n\n                interval = setInterval(() => {\n                    if (isSameDomain(frame) && frame[CONSTANTS.WINDOW_PROPS.POSTROBOT]) {\n                        clearInterval(interval);\n                        clearTimeout(timeout);\n                        return resolve(frame);\n                    }\n\n                    setTimeout(() => {\n                        clearInterval(interval);\n                        return resolve();\n                    }, 2000);\n                }, 100);\n            });\n\n        } catch (err) {\n            return;\n        }\n    });\n}\n\nexport function openTunnelToOpener() {\n    return Promise.try(() => {\n\n        let opener = getOpener(window);\n\n        if (!opener) {\n            return;\n        }\n\n        if (!needsBridge({ win: opener })) {\n            return;\n        }\n\n        registerRemoteWindow(opener);\n\n        return getRemoteBridgeForWindow(opener).then(bridge => {\n\n            if (!bridge) {\n                return rejectRemoteSendMessage(opener, new Error(`Can not register with opener: no bridge found in opener`));\n            }\n\n            if (!window.name) {\n                return rejectRemoteSendMessage(opener, new Error(`Can not register with opener: window does not have a name`));\n            }\n\n            return bridge[CONSTANTS.WINDOW_PROPS.POSTROBOT].openTunnelToParent({\n\n                name: window.name,\n\n                source: window,\n\n                canary() {\n                    // pass\n                },\n\n                sendMessage(message) {\n\n                    if (!window || window.closed) {\n                        return;\n                    }\n\n                    receiveMessage({\n                        data:   message,\n                        origin: this.origin,\n                        source: this.source\n                    });\n                }\n\n            }).then(({ source, origin, data }) => {\n\n                if (source !== opener) {\n                    throw new Error(`Source does not match opener`);\n                }\n\n                registerRemoteSendMessage(source, origin, data.sendMessage);\n\n            }).catch(err => {\n\n                rejectRemoteSendMessage(opener, err);\n                throw err;\n            });\n        });\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/bridge/child.js","\nimport { CONFIG, CONSTANTS } from '../conf';\nimport { util, promise, isSameDomain, isOpener, isSameTopWindow, getUserAgent } from '../lib';\nimport { global } from '../global';\nimport { receiveMessage } from '../drivers';\n\nexport function needsBridgeForBrowser() {\n\n    if (getUserAgent(window).match(/MSIE|trident|edge/i)) {\n        return true;\n    }\n\n    if (!CONFIG.ALLOW_POSTMESSAGE_POPUP) {\n        return true;\n    }\n\n    return false;\n}\n\nexport function needsBridgeForWin(win) {\n\n    if (win && isSameTopWindow(window, win)) {\n        return false;\n    }\n\n    if (win && isSameDomain(win)) {\n        return false;\n    }\n\n    return true;\n}\n\nexport function needsBridgeForDomain(domain) {\n\n    if (domain && util.getDomain() === util.getDomainFromUrl(domain)) {\n        return false;\n    }\n\n    return true;\n}\n\nexport function needsBridge({ win, domain }) {\n    return needsBridgeForBrowser() && needsBridgeForWin(win) && needsBridgeForDomain(domain);\n}\n\nexport function getBridgeName(domain) {\n\n    domain = domain || util.getDomainFromUrl(domain);\n\n    let sanitizedDomain = domain.replace(/[^a-zA-Z0-9]+/g, '_');\n\n    let id = `${CONSTANTS.BRIDGE_NAME_PREFIX}_${sanitizedDomain}`;\n\n    return id;\n}\n\nexport function isBridge() {\n    return window.name && window.name === getBridgeName(util.getDomain());\n}\n\nexport let documentBodyReady = new promise.Promise(resolve => {\n\n    if (window.document && window.document.body) {\n        return resolve(window.document.body);\n    }\n\n    let interval = setInterval(() => {\n        if (window.document && window.document.body) {\n            clearInterval(interval);\n            return resolve(window.document.body);\n        }\n    }, 10);\n});\n\nglobal.remoteWindows = global.remoteWindows || [];\n\nexport function registerRemoteWindow(win, timeout = CONFIG.BRIDGE_TIMEOUT) {\n    let sendMessagePromise = new promise.Promise();\n    global.clean.push(global.remoteWindows, { win, sendMessagePromise });\n}\n\nexport function findRemoteWindow(win) {\n    for (let i = 0; i < global.remoteWindows.length; i++) {\n        if (global.remoteWindows[i].win === win) {\n            return global.remoteWindows[i];\n        }\n    }\n}\n\nexport function registerRemoteSendMessage(win, domain, sendMessage) {\n\n    let remoteWindow = findRemoteWindow(win);\n\n    if (!remoteWindow) {\n        throw new Error(`Window not found to register sendMessage to`);\n    }\n\n    let sendMessageWrapper = (remoteWin, message, remoteDomain) => {\n\n        if (remoteWin !== win) {\n            throw new Error(`Remote window does not match window`);\n        }\n\n        if (remoteDomain !== `*` && remoteDomain !== domain) {\n            throw new Error(`Remote domain ${remoteDomain} does not match domain ${domain}`);\n        }\n\n        sendMessage(message);\n    };\n\n    remoteWindow.sendMessagePromise.resolve(sendMessageWrapper);\n    remoteWindow.sendMessagePromise = promise.Promise.resolve(sendMessageWrapper);\n}\n\nexport function rejectRemoteSendMessage(win, err) {\n\n    let remoteWindow = findRemoteWindow(win);\n\n    if (!remoteWindow) {\n        throw new Error(`Window not found on which to reject sendMessage`);\n    }\n\n    remoteWindow.sendMessagePromise.asyncReject(err);\n}\n\nexport function sendBridgeMessage(win, message, domain) {\n\n    let messagingChild  = isOpener(window, win);\n    let messagingParent = isOpener(win, window);\n\n    if (!messagingChild && !messagingParent) {\n        throw new Error(`Can only send messages to and from parent and popup windows`);\n    }\n\n    let remoteWindow = findRemoteWindow(win);\n\n    if (!remoteWindow) {\n        throw new Error(`Window not found to send message to`);\n    }\n\n    return remoteWindow.sendMessagePromise.then(sendMessage => {\n        return sendMessage(win, message, domain);\n    });\n}\n\nglobal.receiveMessage = function(event) {\n    return receiveMessage(event);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/bridge/common.js","\nimport { CONFIG, CONSTANTS } from '../conf';\nimport { util, promise, log, onWindowReady, getFrameByName } from '../lib';\nimport { global } from '../global';\nimport { on } from '../interface';\nimport { receiveMessage } from '../drivers';\n\nglobal.bridges = global.bridges || {};\n\nimport { getBridgeName, documentBodyReady, registerRemoteSendMessage, registerRemoteWindow } from './common';\n\nfunction listenForRegister(source, domain) {\n    on(CONSTANTS.POST_MESSAGE_NAMES.OPEN_TUNNEL, { source, domain }, ({ origin, data }) => {\n\n        if (origin !== domain) {\n            throw new Error(`Domain ${domain} does not match origin ${origin}`);\n        }\n\n        if (!data.name) {\n            throw new Error(`Register window expected to be passed window name`);\n        }\n\n        if (!data.sendMessage) {\n            throw new Error(`Register window expected to be passed sendMessage method`);\n        }\n\n        let winDetails = global.popupWindows[data.name];\n\n        if (!winDetails) {\n            throw new Error(`Window with name ${data.name} does not exist, or was not opened by this window`);\n        }\n\n        if (!winDetails.domain) {\n            throw new Error(`We do not have a registered domain for window ${data.name}`);\n        }\n\n        if (winDetails.domain !== origin) {\n            throw new Error(`Message origin ${origin} does not matched registered window origin ${winDetails.domain}`);\n        }\n\n        registerRemoteSendMessage(winDetails.win, domain, data.sendMessage);\n\n        return {\n            sendMessage(message) {\n\n                if (!window || window.closed) {\n                    return;\n                }\n\n                receiveMessage({\n                    data:   message,\n                    origin: winDetails.domain,\n                    source: winDetails.win\n                });\n            }\n        };\n    });\n}\n\nfunction openBridgeFrame(name, url) {\n\n    log.debug(`Opening bridge:`, name, url);\n\n    let iframe = document.createElement(`iframe`);\n\n    iframe.setAttribute(`name`, name);\n    iframe.setAttribute(`id`,   name);\n\n    iframe.setAttribute(`style`, `display: none; margin: 0; padding: 0; border: 0px none; overflow: hidden;`);\n    iframe.setAttribute(`frameborder`, `0`);\n    iframe.setAttribute(`border`, `0`);\n    iframe.setAttribute(`scrolling`, `no`);\n    iframe.setAttribute(`allowTransparency`, `true`);\n\n    iframe.setAttribute(`tabindex`, `-1`);\n    iframe.setAttribute(`hidden`, `true`);\n    iframe.setAttribute(`title`, ``);\n    iframe.setAttribute(`role`, `presentation`);\n\n    iframe.src = url;\n\n    return iframe;\n}\n\nexport function openBridge(url, domain) {\n\n    domain = domain || util.getDomainFromUrl(url);\n\n    if (global.bridges[domain]) {\n        return global.bridges[domain];\n    }\n\n    return global.clean.setItem(global.bridges, domain, promise.run(() => {\n\n        if (util.getDomain() === domain) {\n            throw new Error(`Can not open bridge on the same domain as current domain: ${domain}`);\n        }\n\n        let name  = getBridgeName(domain);\n        let frame = getFrameByName(window, name);\n\n        if (frame) {\n            throw new Error(`Frame with name ${name} already exists on page`);\n        }\n\n        let iframe = openBridgeFrame(name, url);\n\n        return documentBodyReady.then(body => {\n\n            return new promise.Promise((resolve, reject) => {\n\n                setTimeout(resolve, 1);\n\n            }).then(() => {\n\n                body.appendChild(iframe);\n\n                global.clean.register('bridgeFrames', () => {\n                    body.removeChild(iframe);\n                    delete global.bridges[domain];\n                });\n\n                let bridge = iframe.contentWindow;\n\n                listenForRegister(bridge, domain);\n\n                return new promise.Promise((resolve, reject) => {\n\n                    iframe.onload = resolve;\n                    iframe.onerror = reject;\n\n                }).then(() => {\n\n                    return onWindowReady(bridge, CONFIG.BRIDGE_TIMEOUT, `Bridge ${url}`);\n\n                }).then(() => {\n\n                    return bridge;\n                });\n            });\n        });\n    }));\n}\n\nexport function destroyBridges() {\n    return global.clean.run('bridgeFrames');\n}\n\nglobal.popupWindows = global.popupWindows || {};\n\nlet windowOpen = window.open;\n\nwindow.open = function(url, name, options, last) {\n\n    let domain = url;\n\n    if (url && url.indexOf(CONSTANTS.MOCK_PROTOCOL) === 0) {\n        [ domain, url ] = url.split('|');\n    }\n\n    if (domain) {\n        domain = util.getDomainFromUrl(domain);\n    }\n\n    let win = windowOpen.call(this, url, name, options, last);\n\n    if (url) {\n        registerRemoteWindow(win);\n    }\n\n    if (name) {\n        global.clean.setItem(global.popupWindows, name, { win, domain });\n    }\n\n    return win;\n};\n\nexport function linkUrl(win, url) {\n\n    for (let name of Object.keys(global.popupWindows)) {\n        let winOptions = global.popupWindows[name];\n\n        if (winOptions.win === win) {\n            winOptions.domain = util.getDomainFromUrl(url);\n\n            registerRemoteWindow(win);\n\n            break;\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/bridge/parent.js","\nimport { global } from '../global';\n\nglobal.listeners = global.listeners || {\n    request: [],\n    response: []\n};\n\nexport let listeners = global.listeners;\n\nexport function resetListeners() {\n    global.listeners.request = [];\n    global.listeners.response = [];\n}\n\nfunction isRegex(item) {\n    return Object.prototype.toString.call(item) === '[object RegExp]';\n}\n\nfunction matchDomain(domain, origin) {\n\n    if (typeof domain === 'string') {\n\n        if (isRegex(origin)) {\n            return false;\n        }\n\n        if (Array.isArray(origin)) {\n            return false;\n        }\n\n        return domain === '*' || origin === domain;\n    }\n\n    if (isRegex(domain)) {\n\n        if (isRegex(origin)) {\n            return domain.toString() === origin.toString();\n        }\n\n        if (Array.isArray(origin)) {\n            return false;\n        }\n\n        return origin.match(domain);\n    }\n\n    if (Array.isArray(domain)) {\n\n        if (isRegex(origin)) {\n            return false;\n        }\n\n        if (Array.isArray(origin)) {\n            return JSON.stringify(domain) === JSON.stringify(origin);\n        }\n\n        return domain.indexOf(origin) !== -1;\n    }\n\n    return false;\n}\n\nexport function getRequestListener(name, win, domain) {\n\n    let result = {};\n\n    for (let requestListener of global.listeners.request) {\n\n        if (requestListener.name !== name) {\n            continue;\n        }\n\n        let specifiedWin = (requestListener.win && requestListener.win !== '*');\n        let specifiedDomain = (requestListener.domain && requestListener.domain !== '*');\n\n        let matchedWin = (specifiedWin && requestListener.win === win);\n        let matchedDomain = (specifiedDomain && matchDomain(requestListener.domain, domain));\n\n        if (specifiedWin && specifiedDomain) {\n            if (matchedWin && matchedDomain) {\n                result.all = result.all || requestListener.options;\n            }\n        } else if (specifiedDomain) {\n            if (matchedDomain) {\n                result.domain = result.domain || requestListener.options;\n            }\n        } else if (specifiedWin) {\n            if (matchedWin) {\n                result.win = result.win || requestListener.options;\n            }\n        } else {\n            result.name = result.name || requestListener.options;\n        }\n    }\n\n    return result.all || result.domain || result.win || result.name;\n}\n\nexport function removeRequestListener(options) {\n\n    for (let listener of global.listeners.request) {\n        if (listener.options === options) {\n            global.listeners.request.splice(global.listeners.request.indexOf(listener), 1);\n        }\n    }\n}\n\nexport function addRequestListener(name, win, domain, options, override) {\n\n    let listener = getRequestListener(name, win, domain);\n\n    if (listener) {\n        if (override) {\n            removeRequestListener(listener);\n        } else {\n\n            if (win) {\n                throw new Error(`Request listener already exists for ${name} on domain ${domain} for specified window: ${listener.win === win}`);\n            }\n\n            throw new Error(`Request listener already exists for ${name} on domain ${domain}`);\n        }\n    }\n\n    global.clean.push(global.listeners.request, { name, win, domain, options });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/drivers/listeners.js","\nimport { CONFIG } from '../conf';\nimport { util, promise, isWindowClosed } from '../lib';\nimport { addRequestListener, removeRequestListener } from '../drivers';\n\nexport function listen(options) {\n\n    if (!options.name) {\n        throw new Error('Expected options.name');\n    }\n\n    options.handler = options.handler || util.noop;\n\n    options.errorHandler = options.errorHandler || function(err) {\n        throw err;\n    };\n\n    if (options.once) {\n        let handler = options.handler;\n        options.handler = util.once(function() {\n            removeRequestListener(options);\n            return handler.apply(this, arguments);\n        });\n    }\n\n    let override = options.override || CONFIG.MOCK_MODE;\n\n    if (options.source) {\n        options.window = options.source;\n    }\n\n    options.domain = options.domain || '*';\n\n    addRequestListener(options.name, options.window, options.domain, options, override);\n\n    options.handleError = err => {\n        // removeRequestListener(options);\n        options.errorHandler(err);\n    };\n\n    if (options.window && options.errorOnClose) {\n        let interval = util.safeInterval(() => {\n            if (isWindowClosed(options.window)) {\n                interval.cancel();\n                options.handleError(new Error('Post message target window is closed'));\n            }\n        }, 50);\n    }\n\n    return {\n        cancel() {\n            removeRequestListener(options);\n        }\n    };\n}\n\nexport function on(name, options, handler, errorHandler) {\n\n    if (typeof options === 'function') {\n        errorHandler = handler;\n        handler = options;\n        options = {};\n    }\n\n    options = options || {};\n\n    options.name = name;\n    options.handler = handler || options.handler;\n    options.errorHandler = errorHandler || options.errorHandler;\n\n    return listen(options);\n}\n\nexport function once(name, options, handler, errorHandler) {\n\n    if (typeof options === 'function') {\n        errorHandler = handler;\n        handler = options;\n        options = {};\n    }\n\n    options = options || {};\n\n    options.name = name;\n    options.handler = handler || options.handler;\n    options.errorHandler = errorHandler || options.errorHandler;\n    options.once = true;\n\n    let prom = new promise.Promise((resolve, reject) => {\n        options.handler = options.handler || (event => resolve(event));\n        options.errorHandler = options.errorHandler || reject;\n    });\n\n    let myListener = listen(options);\n\n    util.extend(prom, myListener);\n\n    return prom;\n}\n\nexport function listener(options = {}) {\n\n    return {\n        on(name, handler, errorHandler) {\n            return on(name, options, handler, errorHandler);\n        }\n    };\n}\n\n\n// WEBPACK FOOTER //\n// ./src/interface/server.js","\nimport { CONFIG, CONSTANTS } from '../conf';\nimport { messageListener } from '../drivers';\n\nexport function enableMockMode() {\n    CONFIG.MOCK_MODE = true;\n}\n\nexport function disableMockMode() {\n    CONFIG.MOCK_MODE = false;\n}\n\nexport { CONFIG, CONSTANTS } from '../conf';\n\nexport function disable() {\n    delete window[CONSTANTS.WINDOW_PROPS.POSTROBOT];\n    window.removeEventListener('message', messageListener);\n}\n\n\n// WEBPACK FOOTER //\n// ./src/interface/config.js"],"sourceRoot":""}